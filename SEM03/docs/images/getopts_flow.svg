<?xml version="1.0" encoding="UTF-8"?>
<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 800 600" width="800" height="600">
  <defs>
    <marker id="arrowhead" markerWidth="10" markerHeight="7" refX="9" refY="3.5" orient="auto">
      <polygon points="0 0, 10 3.5, 0 7" fill="#4A90D9"/>
    </marker>
  </defs>
  
  <!-- Background -->
  <rect width="800" height="600" fill="#0D1117"/>
  
  <!-- Title -->
  <text x="400" y="35" font-family="monospace" font-size="22" fill="#E6EDF3" text-anchor="middle" font-weight="bold">getopts Argument Parsing Flow</text>
  
  <!-- Input -->
  <rect x="50" y="60" width="700" height="50" rx="8" fill="#161B22" stroke="#30363D" stroke-width="1"/>
  <text x="400" y="90" font-family="monospace" font-size="14" fill="#E6EDF3" text-anchor="middle">./script.sh -v -f input.txt -n 10 file1.txt file2.txt</text>
  
  <!-- Flow Diagram -->
  
  <!-- Start -->
  <ellipse cx="100" cy="160" rx="50" ry="25" fill="#1F4529" stroke="#3FB950" stroke-width="2"/>
  <text x="100" y="165" font-family="monospace" font-size="12" fill="#E6EDF3" text-anchor="middle">START</text>
  
  <!-- Arrow down -->
  <line x1="100" y1="185" x2="100" y2="210" stroke="#4A90D9" stroke-width="2" marker-end="url(#arrowhead)"/>
  
  <!-- getopts call -->
  <rect x="30" y="220" width="140" height="40" rx="8" fill="#2D3748" stroke="#58A6FF" stroke-width="2"/>
  <text x="100" y="245" font-family="monospace" font-size="11" fill="#E6EDF3" text-anchor="middle">getopts "vf:n:"</text>
  
  <!-- Arrow right -->
  <line x1="170" y1="240" x2="220" y2="240" stroke="#4A90D9" stroke-width="2" marker-end="url(#arrowhead)"/>
  
  <!-- Decision diamond -->
  <polygon points="320,200 420,240 320,280 220,240" fill="#2D3748" stroke="#F0883E" stroke-width="2"/>
  <text x="320" y="235" font-family="monospace" font-size="10" fill="#E6EDF3" text-anchor="middle">Option</text>
  <text x="320" y="250" font-family="monospace" font-size="10" fill="#E6EDF3" text-anchor="middle">found?</text>
  
  <!-- Yes path - down -->
  <line x1="320" y1="280" x2="320" y2="320" stroke="#4A90D9" stroke-width="2" marker-end="url(#arrowhead)"/>
  <text x="335" y="305" font-family="monospace" font-size="10" fill="#3FB950">yes</text>
  
  <!-- Case statement -->
  <rect x="240" y="330" width="160" height="50" rx="8" fill="#2D3748" stroke="#A371F7" stroke-width="2"/>
  <text x="320" y="355" font-family="monospace" font-size="11" fill="#E6EDF3" text-anchor="middle">case $opt in</text>
  <text x="320" y="372" font-family="monospace" font-size="10" fill="#8B949E" text-anchor="middle">v) f) n) *)</text>
  
  <!-- Branches from case -->
  <line x1="240" y1="355" x2="140" y2="355" stroke="#4A90D9" stroke-width="1"/>
  <line x1="140" y1="355" x2="140" y2="420" stroke="#4A90D9" stroke-width="1" marker-end="url(#arrowhead)"/>
  
  <line x1="280" y1="380" x2="280" y2="420" stroke="#4A90D9" stroke-width="1" marker-end="url(#arrowhead)"/>
  
  <line x1="360" y1="380" x2="360" y2="420" stroke="#4A90D9" stroke-width="1" marker-end="url(#arrowhead)"/>
  
  <line x1="400" y1="355" x2="500" y2="355" stroke="#4A90D9" stroke-width="1"/>
  <line x1="500" y1="355" x2="500" y2="420" stroke="#4A90D9" stroke-width="1" marker-end="url(#arrowhead)"/>
  
  <!-- v) handler -->
  <rect x="90" y="430" width="100" height="40" rx="6" fill="#1F4529" stroke="#3FB950"/>
  <text x="140" y="450" font-family="monospace" font-size="10" fill="#E6EDF3" text-anchor="middle">v) flag</text>
  <text x="140" y="465" font-family="monospace" font-size="9" fill="#8B949E" text-anchor="middle">VERBOSE=true</text>
  
  <!-- f) handler -->
  <rect x="220" y="430" width="120" height="40" rx="6" fill="#1F4529" stroke="#3FB950"/>
  <text x="280" y="450" font-family="monospace" font-size="10" fill="#E6EDF3" text-anchor="middle">f:) with arg</text>
  <text x="280" y="465" font-family="monospace" font-size="9" fill="#8B949E" text-anchor="middle">FILE=$OPTARG</text>
  
  <!-- n) handler -->
  <rect x="350" y="430" width="120" height="40" rx="6" fill="#1F4529" stroke="#3FB950"/>
  <text x="410" y="450" font-family="monospace" font-size="10" fill="#E6EDF3" text-anchor="middle">n:) with arg</text>
  <text x="410" y="465" font-family="monospace" font-size="9" fill="#8B949E" text-anchor="middle">NUM=$OPTARG</text>
  
  <!-- *) handler -->
  <rect x="485" y="430" width="100" height="40" rx="6" fill="#4A1D1D" stroke="#F85149"/>
  <text x="535" y="450" font-family="monospace" font-size="10" fill="#E6EDF3" text-anchor="middle">*) error</text>
  <text x="535" y="465" font-family="monospace" font-size="9" fill="#F85149" text-anchor="middle">exit 1</text>
  
  <!-- Loop back arrow -->
  <line x1="140" y1="470" x2="140" y2="500" stroke="#4A90D9" stroke-width="1"/>
  <line x1="140" y1="500" x2="60" y2="500" stroke="#4A90D9" stroke-width="1"/>
  <line x1="60" y1="500" x2="60" y2="240" stroke="#4A90D9" stroke-width="1"/>
  <line x1="60" y1="240" x2="30" y2="240" stroke="#4A90D9" stroke-width="1" marker-end="url(#arrowhead)"/>
  
  <line x1="280" y1="470" x2="280" y2="490" stroke="#4A90D9" stroke-width="1"/>
  <line x1="280" y1="490" x2="140" y2="490" stroke="#4A90D9" stroke-width="1"/>
  
  <line x1="410" y1="470" x2="410" y2="490" stroke="#4A90D9" stroke-width="1"/>
  <line x1="410" y1="490" x2="280" y2="490" stroke="#4A90D9" stroke-width="1"/>
  
  <!-- No path - right from diamond -->
  <line x1="420" y1="240" x2="520" y2="240" stroke="#4A90D9" stroke-width="2" marker-end="url(#arrowhead)"/>
  <text x="470" y="230" font-family="monospace" font-size="10" fill="#F85149">no</text>
  
  <!-- shift -->
  <rect x="530" y="215" width="150" height="50" rx="8" fill="#2D3748" stroke="#F0883E" stroke-width="2"/>
  <text x="605" y="240" font-family="monospace" font-size="11" fill="#E6EDF3" text-anchor="middle">shift $((OPTIND-1))</text>
  <text x="605" y="258" font-family="monospace" font-size="9" fill="#8B949E" text-anchor="middle">Remove processed opts</text>
  
  <!-- Arrow down -->
  <line x1="605" y1="265" x2="605" y2="310" stroke="#4A90D9" stroke-width="2" marker-end="url(#arrowhead)"/>
  
  <!-- Remaining args -->
  <rect x="530" y="320" width="150" height="50" rx="8" fill="#161B22" stroke="#58A6FF" stroke-width="2"/>
  <text x="605" y="345" font-family="monospace" font-size="11" fill="#58A6FF" text-anchor="middle">$@ now contains:</text>
  <text x="605" y="362" font-family="monospace" font-size="10" fill="#E6EDF3" text-anchor="middle">file1.txt file2.txt</text>
  
  <!-- End -->
  <line x1="605" y1="370" x2="605" y2="410" stroke="#4A90D9" stroke-width="2" marker-end="url(#arrowhead)"/>
  <ellipse cx="605" cy="440" rx="60" ry="25" fill="#1F4529" stroke="#3FB950" stroke-width="2"/>
  <text x="605" y="445" font-family="monospace" font-size="11" fill="#E6EDF3" text-anchor="middle">MAIN LOGIC</text>
  
  <!-- Syntax Reference -->
  <rect x="530" y="480" width="250" height="110" rx="8" fill="#161B22" stroke="#30363D" stroke-width="1"/>
  <text x="655" y="505" font-family="monospace" font-size="12" fill="#7EE787" text-anchor="middle">getopts syntax:</text>
  <text x="550" y="530" font-family="monospace" font-size="11" fill="#E6EDF3">"vf:n:"</text>
  <text x="550" y="555" font-family="monospace" font-size="10" fill="#58A6FF">v</text>
  <text x="570" y="555" font-family="monospace" font-size="10" fill="#8B949E">= flag (no arg)</text>
  <text x="550" y="575" font-family="monospace" font-size="10" fill="#3FB950">f:</text>
  <text x="575" y="575" font-family="monospace" font-size="10" fill="#8B949E">= requires arg</text>
  
  <!-- Key Variables -->
  <rect x="50" y="510" width="200" height="80" rx="8" fill="#161B22" stroke="#30363D" stroke-width="1"/>
  <text x="150" y="535" font-family="monospace" font-size="12" fill="#F0883E" text-anchor="middle">Key Variables:</text>
  <text x="70" y="560" font-family="monospace" font-size="10" fill="#E6EDF3">$opt    - current option</text>
  <text x="70" y="580" font-family="monospace" font-size="10" fill="#E6EDF3">$OPTARG - option argument</text>
  
  <!-- Common Errors -->
  <rect x="270" y="510" width="240" height="80" rx="8" fill="#161B22" stroke="#F85149" stroke-width="1"/>
  <text x="390" y="535" font-family="monospace" font-size="12" fill="#F85149" text-anchor="middle">Common Errors:</text>
  <text x="290" y="560" font-family="monospace" font-size="10" fill="#E6EDF3">VAR = value  ✗ (spaces!)</text>
  <text x="290" y="580" font-family="monospace" font-size="10" fill="#E6EDF3">getopts vf:  ✗ (missing quotes)</text>
</svg>
