<?xml version="1.0" encoding="UTF-8"?>
<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 850 550" width="850" height="550">
  <defs>
    <marker id="arrow" markerWidth="10" markerHeight="10" refX="9" refY="3" orient="auto">
      <path d="M0,0 L0,6 L9,3 z" fill="#333"/>
    </marker>
    <marker id="arrowGreen" markerWidth="10" markerHeight="10" refX="9" refY="3" orient="auto">
      <path d="M0,0 L0,6 L9,3 z" fill="#2e7d32"/>
    </marker>
    <marker id="arrowRed" markerWidth="10" markerHeight="10" refX="9" refY="3" orient="auto">
      <path d="M0,0 L0,6 L9,3 z" fill="#c62828"/>
    </marker>
  </defs>
  
  <!-- Title -->
  <text x="425" y="30" text-anchor="middle" font-family="Arial, sans-serif" font-size="20" font-weight="bold" fill="#1565c0">
    set -euo pipefail — Flux de Execuție
  </text>
  
  <!-- Command line -->
  <rect x="200" y="50" width="450" height="35" rx="5" ry="5" fill="#263238" stroke="#37474f" stroke-width="2"/>
  <text x="425" y="73" text-anchor="middle" font-family="monospace" font-size="14" fill="#4caf50">set -euo pipefail</text>
  
  <!-- Three columns for each option -->
  
  <!-- Column 1: set -e -->
  <rect x="30" y="110" width="250" height="420" rx="8" ry="8" fill="#ffebee" stroke="#c62828" stroke-width="2"/>
  <text x="155" y="140" text-anchor="middle" font-family="Arial, sans-serif" font-size="16" font-weight="bold" fill="#c62828">set -e (errexit)</text>
  
  <rect x="50" y="160" width="210" height="60" rx="5" ry="5" fill="#fff" stroke="#ef9a9a" stroke-width="1"/>
  <text x="155" y="185" text-anchor="middle" font-family="Arial, sans-serif" font-size="12" fill="#333">Oprește scriptul la</text>
  <text x="155" y="205" text-anchor="middle" font-family="Arial, sans-serif" font-size="12" font-weight="bold" fill="#c62828">prima eroare (exit ≠ 0)</text>
  
  <!-- Exception box for -e -->
  <rect x="50" y="235" width="210" height="150" rx="5" ry="5" fill="#fff8e1" stroke="#ffc107" stroke-width="1"/>
  <text x="155" y="255" text-anchor="middle" font-family="Arial, sans-serif" font-size="11" font-weight="bold" fill="#f57c00">⚠ EXCEPȚII (nu oprește):</text>
  <text x="60" y="280" font-family="monospace" font-size="10" fill="#333">• if false; then ...</text>
  <text x="60" y="300" font-family="monospace" font-size="10" fill="#333">• while false; do ...</text>
  <text x="60" y="320" font-family="monospace" font-size="10" fill="#333">• cmd || echo "fail"</text>
  <text x="60" y="340" font-family="monospace" font-size="10" fill="#333">• cmd && echo "ok"</text>
  <text x="60" y="360" font-family="monospace" font-size="10" fill="#333">• ! false</text>
  <text x="60" y="375" font-family="Arial, sans-serif" font-size="9" fill="#666">(comenzi în context de test)</text>
  
  <!-- Example for -e -->
  <rect x="50" y="400" width="210" height="110" rx="5" ry="5" fill="#fff" stroke="#ef9a9a" stroke-width="1"/>
  <text x="60" y="420" font-family="monospace" font-size="10" fill="#333">#!/bin/bash</text>
  <text x="60" y="435" font-family="monospace" font-size="10" fill="#c62828">set -e</text>
  <text x="60" y="455" font-family="monospace" font-size="10" fill="#333">false    # exit 1</text>
  <text x="60" y="475" font-family="monospace" font-size="10" fill="#999"># ↑ STOP aici!</text>
  <text x="60" y="495" font-family="monospace" font-size="10" fill="#999">echo "nu ajunge"</text>
  
  <!-- Column 2: set -u -->
  <rect x="300" y="110" width="250" height="420" rx="8" ry="8" fill="#e3f2fd" stroke="#1565c0" stroke-width="2"/>
  <text x="425" y="140" text-anchor="middle" font-family="Arial, sans-serif" font-size="16" font-weight="bold" fill="#1565c0">set -u (nounset)</text>
  
  <rect x="320" y="160" width="210" height="60" rx="5" ry="5" fill="#fff" stroke="#90caf9" stroke-width="1"/>
  <text x="425" y="185" text-anchor="middle" font-family="Arial, sans-serif" font-size="12" fill="#333">Oprește scriptul la</text>
  <text x="425" y="205" text-anchor="middle" font-family="Arial, sans-serif" font-size="12" font-weight="bold" fill="#1565c0">variabilă nedefinită</text>
  
  <!-- Solution box for -u -->
  <rect x="320" y="235" width="210" height="150" rx="5" ry="5" fill="#e8f5e9" stroke="#4caf50" stroke-width="1"/>
  <text x="425" y="255" text-anchor="middle" font-family="Arial, sans-serif" font-size="11" font-weight="bold" fill="#2e7d32">✓ SOLUȚII:</text>
  <text x="330" y="280" font-family="monospace" font-size="10" fill="#333"># Valoare default</text>
  <text x="330" y="300" font-family="monospace" font-size="10" fill="#2e7d32">${VAR:-default}</text>
  <text x="330" y="325" font-family="monospace" font-size="10" fill="#333"># String gol ok</text>
  <text x="330" y="345" font-family="monospace" font-size="10" fill="#2e7d32">${VAR:-}</text>
  <text x="330" y="370" font-family="monospace" font-size="10" fill="#333"># Verificare</text>
  <text x="330" y="385" font-family="monospace" font-size="9" fill="#2e7d32">[[ -n "${VAR:-}" ]]</text>
  
  <!-- Example for -u -->
  <rect x="320" y="400" width="210" height="110" rx="5" ry="5" fill="#fff" stroke="#90caf9" stroke-width="1"/>
  <text x="330" y="420" font-family="monospace" font-size="10" fill="#333">#!/bin/bash</text>
  <text x="330" y="435" font-family="monospace" font-size="10" fill="#1565c0">set -u</text>
  <text x="330" y="455" font-family="monospace" font-size="10" fill="#333">echo "$NEDEFINIT"</text>
  <text x="330" y="475" font-family="monospace" font-size="10" fill="#c62828"># ↑ EROARE!</text>
  <text x="330" y="495" font-family="monospace" font-size="10" fill="#999"># unbound variable</text>
  
  <!-- Column 3: pipefail -->
  <rect x="570" y="110" width="250" height="420" rx="8" ry="8" fill="#f3e5f5" stroke="#7b1fa2" stroke-width="2"/>
  <text x="695" y="140" text-anchor="middle" font-family="Arial, sans-serif" font-size="16" font-weight="bold" fill="#7b1fa2">set -o pipefail</text>
  
  <rect x="590" y="160" width="210" height="60" rx="5" ry="5" fill="#fff" stroke="#ce93d8" stroke-width="1"/>
  <text x="695" y="185" text-anchor="middle" font-family="Arial, sans-serif" font-size="12" fill="#333">Pipeline returnează</text>
  <text x="695" y="205" text-anchor="middle" font-family="Arial, sans-serif" font-size="12" font-weight="bold" fill="#7b1fa2">primul exit ≠ 0</text>
  
  <!-- Comparison box for pipefail -->
  <rect x="590" y="235" width="210" height="150" rx="5" ry="5" fill="#fff" stroke="#ce93d8" stroke-width="1"/>
  <text x="695" y="255" text-anchor="middle" font-family="Arial, sans-serif" font-size="11" font-weight="bold" fill="#7b1fa2">Comparație:</text>
  <text x="600" y="280" font-family="monospace" font-size="10" fill="#333">false | true | true</text>
  <text x="600" y="305" font-family="Arial, sans-serif" font-size="10" fill="#c62828">Fără pipefail: $? = 0</text>
  <text x="600" y="320" font-family="Arial, sans-serif" font-size="9" fill="#666">(ultimul true)</text>
  <text x="600" y="350" font-family="Arial, sans-serif" font-size="10" fill="#2e7d32">Cu pipefail: $? = 1</text>
  <text x="600" y="365" font-family="Arial, sans-serif" font-size="9" fill="#666">(primul false)</text>
  <text x="600" y="385" font-family="monospace" font-size="9" fill="#666">PIPESTATUS: (1 0 0)</text>
  
  <!-- Example for pipefail -->
  <rect x="590" y="400" width="210" height="110" rx="5" ry="5" fill="#fff" stroke="#ce93d8" stroke-width="1"/>
  <text x="600" y="420" font-family="monospace" font-size="10" fill="#333">#!/bin/bash</text>
  <text x="600" y="435" font-family="monospace" font-size="10" fill="#7b1fa2">set -eo pipefail</text>
  <text x="600" y="455" font-family="monospace" font-size="10" fill="#333">cat /err | grep x</text>
  <text x="600" y="475" font-family="monospace" font-size="10" fill="#c62828"># ↑ STOP!</text>
  <text x="600" y="495" font-family="monospace" font-size="10" fill="#999"># cat eșuează</text>
</svg>
