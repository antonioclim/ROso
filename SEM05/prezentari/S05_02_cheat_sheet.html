<!DOCTYPE html>
<html lang="ro">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Cheat Sheet: Advanced Bash Scripting | Seminar 5</title>
    <style>
        :root {
            --primary: #2563eb;
            --secondary: #7c3aed;
            --success: #10b981;
            --warning: #f59e0b;
            --danger: #ef4444;
            --dark: #1e293b;
            --light: #f8fafc;
            --cyan: #06b6d4;
            --pink: #ec4899;
            --orange: #f97316;
        }
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Segoe UI', system-ui, sans-serif;
            background: var(--dark);
            color: var(--light);
            padding: 20px;
            min-height: 100vh;
        }
        
        .container {
            max-width: 1400px;
            margin: 0 auto;
        }
        
        h1 {
            text-align: center;
            font-size: 2rem;
            margin-bottom: 10px;
            color: var(--primary);
        }
        
        .subtitle {
            text-align: center;
            color: #64748b;
            margin-bottom: 30px;
        }
        
        .grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(400px, 1fr));
            gap: 20px;
        }
        
        .card {
            background: rgba(255, 255, 255, 0.03);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 12px;
            padding: 20px;
        }
        
        .card-title {
            font-size: 1.3rem;
            font-weight: 600;
            margin-bottom: 15px;
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .card-title.strict { color: #ef4444; }
        .card-title.functions { color: #10b981; }
        .card-title.arrays { color: #8b5cf6; }
        .card-title.assoc { color: #f59e0b; }
        .card-title.trap { color: #ec4899; }
        .card-title.debug { color: #06b6d4; }
        .card-title.checks { color: #22c55e; }
        .card-title.defaults { color: #f97316; }
        
        table {
            width: 100%;
            border-collapse: collapse;
            font-size: 0.9rem;
        }
        
        th, td {
            padding: 8px 10px;
            text-align: left;
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
        }
        
        th {
            color: #94a3b8;
            font-weight: 500;
            font-size: 0.8rem;
            text-transform: uppercase;
        }
        
        code {
            background: rgba(0, 0, 0, 0.3);
            padding: 2px 6px;
            border-radius: 4px;
            font-family: 'Fira Code', 'Consolas', monospace;
            font-size: 0.85rem;
        }
        
        .warning {
            background: rgba(239, 68, 68, 0.1);
            border-left: 3px solid var(--danger);
            padding: 10px 15px;
            margin-top: 15px;
            border-radius: 0 8px 8px 0;
            font-size: 0.85rem;
        }
        
        .tip {
            background: rgba(16, 185, 129, 0.1);
            border-left: 3px solid var(--success);
            padding: 10px 15px;
            margin-top: 15px;
            border-radius: 0 8px 8px 0;
            font-size: 0.85rem;
        }
        
        .examples {
            background: rgba(0, 0, 0, 0.2);
            border-radius: 8px;
            padding: 12px;
            margin-top: 10px;
            font-family: 'Fira Code', monospace;
            font-size: 0.8rem;
            line-height: 1.6;
        }
        
        .examples .comment {
            color: #64748b;
        }
        
        .examples .cmd {
            color: #10b981;
        }
        
        .examples .bad {
            color: #ef4444;
        }
        
        .examples .good {
            color: #10b981;
        }
        
        .footer {
            text-align: center;
            margin-top: 30px;
            color: #64748b;
            font-size: 0.85rem;
        }
        
        .vs-table td:first-child {
            color: #ef4444;
        }
        
        .vs-table td:last-child {
            color: #10b981;
        }
        
        @media print {
            body {
                background: white;
                color: black;
            }
            .card {
                border: 1px solid #ccc;
                break-inside: avoid;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>Advanced Bash Cheat Sheet</h1>
        <p class="subtitle">Seminar 5 | Func»õii ‚Ä¢ Arrays ‚Ä¢ Robuste»õe ‚Ä¢ Debugging</p>
        
        <div class="grid">
            
            <!-- STRICT MODE -->
            <div class="card">
                <div class="card-title strict">üõ°Ô∏è Strict Mode (OBLIGATORIU)</div>
                <div class="examples">
                    <span class="comment">#!/bin/bash</span><br>
                    <span class="cmd">set -euo pipefail</span><br>
                    <span class="cmd">IFS=$'\n\t'</span>
                </div>
                <table>
                    <tr><th>Op»õiune</th><th>Efect</th></tr>
                    <tr><td><code>-e</code></td><td>Exit la prima eroare</td></tr>
                    <tr><td><code>-u</code></td><td>Eroare la variabilƒÉ nedefinitƒÉ</td></tr>
                    <tr><td><code>-o pipefail</code></td><td>Pipe returneazƒÉ prima eroare</td></tr>
                    <tr><td><code>IFS=$'\n\t'</code></td><td>Separator sigur (fƒÉrƒÉ spa»õiu)</td></tr>
                </table>
                <div class="warning">
                    ‚ö†Ô∏è <strong>-e NU func»õioneazƒÉ √Æn:</strong><br>
                    <code>if cmd</code> | <code>cmd || other</code> | <code>cmd && other</code> | <code>! cmd</code>
                </div>
            </div>
            
            <!-- FUNC»öII -->
            <div class="card">
                <div class="card-title functions">üì¶ Func»õii - SintaxƒÉ</div>
                <div class="examples">
                    <span class="cmd">function_name() {</span><br>
                    <span class="cmd">    local var="value"</span>  <span class="comment"># √éNTOTDEAUNA local!</span><br>
                    <span class="cmd">    echo "result"</span>      <span class="comment"># "returneazƒÉ" valori</span><br>
                    <span class="cmd">    return 0</span>           <span class="comment"># doar exit code (0-255)</span><br>
                    <span class="cmd">}</span><br><br>
                    <span class="comment"># Captare rezultat:</span><br>
                    <span class="cmd">result=$(function_name arg1 arg2)</span>
                </div>
                <table>
                    <tr><th>VariabilƒÉ</th><th>Con»õinut</th></tr>
                    <tr><td><code>$1, $2...</code></td><td>Argumente pozi»õionale</td></tr>
                    <tr><td><code>$@</code></td><td>Toate argumentele (ca array)</td></tr>
                    <tr><td><code>$#</code></td><td>NumƒÉr argumente</td></tr>
                    <tr><td><code>$0</code></td><td>Numele scriptului</td></tr>
                </table>
            </div>
            
            <!-- FUNC»öII GRE»òELI -->
            <div class="card">
                <div class="card-title functions">üì¶ Func»õii - Gre»ôeli Comune</div>
                <div class="examples">
                    <span class="comment"># ‚ùå GRE»òIT: variabilƒÉ globalƒÉ</span><br>
                    <span class="bad">process() { count=0; }</span><br><br>
                    <span class="comment"># ‚úÖ CORECT: variabilƒÉ localƒÉ</span><br>
                    <span class="good">process() { local count=0; }</span><br><br>
                    <span class="comment"># ‚ùå GRE»òIT: return pentru valori</span><br>
                    <span class="bad">get_sum() { return $((a+b)); }</span> <span class="comment"># Max 255!</span><br><br>
                    <span class="comment"># ‚úÖ CORECT: echo pentru valori</span><br>
                    <span class="good">get_sum() { echo $((a+b)); }</span><br>
                    <span class="good">result=$(get_sum)</span>
                </div>
            </div>
            
            <!-- ARRAYS INDEXATE -->
            <div class="card">
                <div class="card-title arrays">üìö Arrays Indexate</div>
                <table>
                    <tr><th>Opera»õie</th><th>SintaxƒÉ</th></tr>
                    <tr><td>Creare</td><td><code>arr=("a" "b" "c")</code></td></tr>
                    <tr><td>Append</td><td><code>arr+=("d")</code></td></tr>
                    <tr><td>Modificare</td><td><code>arr[0]="A"</code></td></tr>
                    <tr><td>Element</td><td><code>${arr[0]}</code> (index 0!)</td></tr>
                    <tr><td>Toate</td><td><code>${arr[@]}</code></td></tr>
                    <tr><td>Lungime</td><td><code>${#arr[@]}</code></td></tr>
                    <tr><td>Indici</td><td><code>${!arr[@]}</code></td></tr>
                    <tr><td>Slice</td><td><code>${arr[@]:1:3}</code></td></tr>
                </table>
                <div class="warning">
                    ‚ö†Ô∏è Iterare: <code>for item in "${arr[@]}"</code> - CU ghilimele!
                </div>
            </div>
            
            <!-- ARRAYS ASOCIATIVE -->
            <div class="card">
                <div class="card-title assoc">üîë Arrays Asociative</div>
                <div class="examples">
                    <span class="comment"># OBLIGATORIU declare -A !</span><br>
                    <span class="cmd">declare -A config</span><br>
                    <span class="cmd">config[host]="localhost"</span><br>
                    <span class="cmd">config[port]="8080"</span><br><br>
                    <span class="comment"># Sau inline:</span><br>
                    <span class="cmd">declare -A config=(</span><br>
                    <span class="cmd">    [host]="localhost"</span><br>
                    <span class="cmd">    [port]="8080"</span><br>
                    <span class="cmd">)</span>
                </div>
                <table>
                    <tr><th>Opera»õie</th><th>SintaxƒÉ</th></tr>
                    <tr><td>Valoare</td><td><code>${config[host]}</code></td></tr>
                    <tr><td>Toate cheile</td><td><code>${!config[@]}</code></td></tr>
                    <tr><td>Toate valorile</td><td><code>${config[@]}</code></td></tr>
                    <tr><td>NumƒÉr chei</td><td><code>${#config[@]}</code></td></tr>
                </table>
                <div class="warning">
                    ‚ö†Ô∏è FƒÇRƒÇ <code>declare -A</code>: <code>hash[host]="x"</code> ‚Üí <code>hash[0]="x"</code> (host=0!)
                </div>
            </div>
            
            <!-- TRAP -->
            <div class="card">
                <div class="card-title trap">üßπ Trap »ôi Cleanup</div>
                <div class="examples">
                    <span class="cmd">cleanup() {</span><br>
                    <span class="cmd">    local exit_code=$?</span><br>
                    <span class="cmd">    [[ -f "$TEMP" ]] && rm -f "$TEMP"</span><br>
                    <span class="cmd">    exit $exit_code</span><br>
                    <span class="cmd">}</span><br><br>
                    <span class="cmd">trap cleanup EXIT</span>  <span class="comment"># La orice ie»ôire</span><br>
                    <span class="cmd">trap 'echo "Ctrl+C"' INT</span>  <span class="comment"># La Ctrl+C</span>
                </div>
                <table>
                    <tr><th>Semnal</th><th>C√¢nd</th></tr>
                    <tr><td><code>EXIT</code></td><td>La ie»ôirea scriptului (orice mod)</td></tr>
                    <tr><td><code>ERR</code></td><td>La eroare (cu set -e)</td></tr>
                    <tr><td><code>INT</code></td><td>Ctrl+C</td></tr>
                    <tr><td><code>TERM</code></td><td>kill (default)</td></tr>
                    <tr><td><code>DEBUG</code></td><td>√énainte de fiecare comandƒÉ</td></tr>
                </table>
            </div>
            
            <!-- DEFAULT VALUES -->
            <div class="card">
                <div class="card-title defaults">üîß Default Values</div>
                <table>
                    <tr><th>SintaxƒÉ</th><th>Efect</th></tr>
                    <tr><td><code>${VAR:-default}</code></td><td>ReturneazƒÉ default dacƒÉ nesetat/gol</td></tr>
                    <tr><td><code>${VAR:=default}</code></td><td>SeteazƒÉ VAR la default dacƒÉ nesetat/gol</td></tr>
                    <tr><td><code>${VAR:?error}</code></td><td>Eroare dacƒÉ nesetat/gol</td></tr>
                    <tr><td><code>${VAR:+alt}</code></td><td>ReturneazƒÉ alt dacƒÉ VAR E setat</td></tr>
                </table>
                <div class="examples">
                    <span class="comment"># Pattern pentru argumente:</span><br>
                    <span class="cmd">INPUT="${1:-default.txt}"</span><br>
                    <span class="cmd">: "${REQUIRED:?Must be set}"</span>
                </div>
            </div>
            
            <!-- DEBUGGING -->
            <div class="card">
                <div class="card-title debug">ü™≤ Debugging</div>
                <table>
                    <tr><th>ComandƒÉ</th><th>Efect</th></tr>
                    <tr><td><code>set -x</code></td><td>Afi»ôeazƒÉ comenzi (xtrace)</td></tr>
                    <tr><td><code>set -v</code></td><td>Afi»ôeazƒÉ linii citite</td></tr>
                    <tr><td><code>set +x</code></td><td>DezactiveazƒÉ trace</td></tr>
                    <tr><td><code>bash -x script.sh</code></td><td>RuleazƒÉ cu debug</td></tr>
                </table>
                <div class="examples">
                    <span class="comment"># Custom PS4:</span><br>
                    <span class="cmd">PS4='+ ${BASH_SOURCE}:${LINENO}: '</span><br><br>
                    <span class="comment"># Variabile debug:</span><br>
                    <span class="cmd">$LINENO</span>          <span class="comment"># Linia curentƒÉ</span><br>
                    <span class="cmd">$BASH_COMMAND</span>    <span class="comment"># Comanda curentƒÉ</span><br>
                    <span class="cmd">$FUNCNAME</span>        <span class="comment"># Func»õia curentƒÉ</span><br>
                    <span class="cmd">${PIPESTATUS[@]}</span> <span class="comment"># Exit codes din pipe</span>
                </div>
            </div>
            
            <!-- VERIFICƒÇRI -->
            <div class="card">
                <div class="card-title checks">‚úÖ VerificƒÉri ([[ ... ]])</div>
                <table>
                    <tr><th colspan="2">Fi»ôiere</th></tr>
                    <tr><td><code>-f "$f"</code></td><td>Fi»ôier existƒÉ</td></tr>
                    <tr><td><code>-d "$d"</code></td><td>Director existƒÉ</td></tr>
                    <tr><td><code>-r/-w/-x</code></td><td>Citibil/Scriibil/Executabil</td></tr>
                    <tr><td><code>-s "$f"</code></td><td>Non-empty</td></tr>
                    <tr><th colspan="2">Stringuri</th></tr>
                    <tr><td><code>-z "$s"</code></td><td>Empty</td></tr>
                    <tr><td><code>-n "$s"</code></td><td>Non-empty</td></tr>
                    <tr><td><code>"$a" == "$b"</code></td><td>Egal</td></tr>
                    <tr><td><code>"$s" =~ regex</code></td><td>Regex match</td></tr>
                    <tr><th colspan="2">Numere</th></tr>
                    <tr><td><code>$a -eq/-ne $b</code></td><td>Equal / Not equal</td></tr>
                    <tr><td><code>$a -lt/-gt $b</code></td><td>Less than / Greater than</td></tr>
                </table>
            </div>
            
            <!-- GRE»òELI FRECVENTE -->
            <div class="card">
                <div class="card-title" style="color: var(--danger);">üö´ Gre»ôeli Frecvente</div>
                <table class="vs-table">
                    <tr><th>‚ùå Gre»ôit</th><th>‚úÖ Corect</th></tr>
                    <tr><td><code>$arr[@]</code></td><td><code>${arr[@]}</code></td></tr>
                    <tr><td><code>${arr[@]}</code> √Æn for</td><td><code>"${arr[@]}"</code></td></tr>
                    <tr><td><code>hash[key]=v</code></td><td><code>declare -A hash; hash[key]=v</code></td></tr>
                    <tr><td><code>var</code> √Æn func</td><td><code>local var</code> √Æn func</td></tr>
                    <tr><td><code>return "string"</code></td><td><code>echo "string"</code></td></tr>
                    <tr><td><code>cd $dir</code></td><td><code>cd "$dir"</code></td></tr>
                    <tr><td><code>$(ls *.txt)</code></td><td><code>*.txt</code> sau <code>find</code></td></tr>
                </table>
            </div>
            
            <!-- TEMPLATE RAPID -->
            <div class="card">
                <div class="card-title" style="color: var(--primary);">üìã Template Script Profesional</div>
                <div class="examples">
                    <span class="comment">#!/bin/bash</span><br>
                    <span class="cmd">set -euo pipefail</span><br><br>
                    <span class="cmd">readonly SCRIPT_NAME=$(basename "$0")</span><br>
                    <span class="cmd">die() { echo "FATAL: $*" >&2; exit 1; }</span><br><br>
                    <span class="cmd">cleanup() {</span><br>
                    <span class="cmd">    local ec=$?</span><br>
                    <span class="cmd">    # cleanup code</span><br>
                    <span class="cmd">    exit $ec</span><br>
                    <span class="cmd">}</span><br>
                    <span class="cmd">trap cleanup EXIT</span><br><br>
                    <span class="cmd">[[ $# -ge 1 ]] || die "Usage: $SCRIPT_NAME &lt;arg&gt;"</span><br><br>
                    <span class="cmd">main() {</span><br>
                    <span class="cmd">    echo "Hello from $SCRIPT_NAME"</span><br>
                    <span class="cmd">}</span><br><br>
                    <span class="cmd">main "$@"</span>
                </div>
            </div>
            
        </div>
        
        <div class="footer">
            Sisteme de Operare | ASE Bucure»ôti - CSIE | Seminar 5<br>
            <small>set -euo pipefail ‚Ä¢ local √Æn func»õii ‚Ä¢ declare -A pentru hash ‚Ä¢ ghilimele la arrays</small>
        </div>
    </div>
</body>
</html>
