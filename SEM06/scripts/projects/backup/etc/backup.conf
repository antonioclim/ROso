#!/bin/bash
# =============================================================================
# BACKUP SYSTEM - Configuration File
# =============================================================================
# Enterprise Backup System - Configuration File
# This file defines all options for the backup system
# =============================================================================

# -----------------------------------------------------------------------------
# BACKUP SOURCES
# -----------------------------------------------------------------------------
# Directories/files to include in backup (array, space-separated)
# Example: BACKUP_SOURCES=("/home" "/etc" "/var/www")
BACKUP_SOURCES=("/home" "/etc")

# Directories/files to exclude (array with glob patterns)
# Example: EXCLUDE_PATTERNS=("*.tmp" "*.log" "cache/*" ".git")
EXCLUDE_PATTERNS=("*.tmp" "*.cache" "*.log" ".git" "__pycache__" "node_modules")

# -----------------------------------------------------------------------------
# BACKUP DESTINATION
# -----------------------------------------------------------------------------
# Directory where backups are saved
BACKUP_DEST="/var/backups/system"

# Prefix for backup file names
BACKUP_PREFIX="backup"

# Format for timestamp in file name
# Uses strftime format: %Y=year, %m=month, %d=day, %H=hour, %M=minute
TIMESTAMP_FORMAT="%Y%m%d_%H%M%S"

# -----------------------------------------------------------------------------
# COMPRESSION
# -----------------------------------------------------------------------------
# Compression type: none, gzip, bzip2, xz, zstd
# gzip  = fast, moderate compression
# bzip2 = slower, good compression
# xz    = very slow, excellent compression
# zstd  = fast, good compression (recommended)
COMPRESSION="gzip"

# Compression level (1-9, where 9 = maximum)
COMPRESSION_LEVEL=6

# -----------------------------------------------------------------------------
# RETENTION POLICY
# -----------------------------------------------------------------------------
# Daily backups to keep
RETENTION_DAILY=7

# Weekly backups to keep (created on Sunday)
RETENTION_WEEKLY=4

# Monthly backups to keep (created on 1st of month)
RETENTION_MONTHLY=12

# Day for weekly backup (0=Sunday, 1=Monday, ..., 6=Saturday)
WEEKLY_DAY=0

# Day of month for monthly backup
MONTHLY_DAY=1

# -----------------------------------------------------------------------------
# INTEGRITY VERIFICATION
# -----------------------------------------------------------------------------
# Verify backup after creation
VERIFY_BACKUP=true

# Save checksum for later verification
SAVE_CHECKSUM=true

# Checksum algorithm: md5, sha1, sha256
CHECKSUM_ALGORITHM="sha256"

# Verify archive integrity (tar -tf)
VERIFY_ARCHIVE_LISTING=true

# -----------------------------------------------------------------------------
# PRE/POST PROCESSING
# -----------------------------------------------------------------------------
# Script to execute before backup (can stop backup if returns non-zero)
PRE_BACKUP_SCRIPT=""

# Script to execute after backup (receives archive path as argument)
POST_BACKUP_SCRIPT=""

# Timeout for pre/post scripts (seconds)
SCRIPT_TIMEOUT=300

# -----------------------------------------------------------------------------
# LOGGING
# -----------------------------------------------------------------------------
# Logging level: DEBUG, INFO, WARN, ERROR
LOG_LEVEL="INFO"

# Main log file
LOG_FILE="/var/log/backup/backup.log"

# Directory for individual logs per backup
LOG_DIR="/var/log/backup"

# Log retention (days)
LOG_RETENTION_DAYS=30

# Enable coloured output
USE_COLORS=true

# -----------------------------------------------------------------------------
# NOTIFICATIONS
# -----------------------------------------------------------------------------
# Enable email notifications
NOTIFY_EMAIL=false

# Email addresses for notifications (comma-separated)
EMAIL_RECIPIENTS="contact_eliminat"

# Send email only on errors
NOTIFY_ON_ERROR_ONLY=true

# Send email also on success
NOTIFY_ON_SUCCESS=false

# Email subject for success
EMAIL_SUBJECT_SUCCESS="[BACKUP] Success: $(hostname)"

# Email subject for error
EMAIL_SUBJECT_ERROR="[BACKUP] ERROR: $(hostname)"

# -----------------------------------------------------------------------------
# ADVANCED OPTIONS
# -----------------------------------------------------------------------------
# Run in dry-run mode (simulation without modifications)
DRY_RUN=false

# Verbose output (display each file processed)
VERBOSE=false

# Preserve permissions and ownership
PRESERVE_PERMISSIONS=true

# Follow symlinks (backup content, not link)
FOLLOW_SYMLINKS=false

# Exclude files larger than (bytes, 0=disabled)
MAX_FILE_SIZE=0

# Nice level for process (0-19, higher = lower priority)
NICE_LEVEL=10

# Ionice class (1=realtime, 2=best-effort, 3=idle)
IONICE_CLASS=3

# Timeout for backup operation (seconds, 0=no timeout)
BACKUP_TIMEOUT=0

# Lock file to prevent concurrent executions
LOCK_FILE="/var/run/backup.lock"

# Timeout for acquiring lock (seconds)
LOCK_TIMEOUT=60

# =============================================================================
# END CONFIGURATION
# =============================================================================
