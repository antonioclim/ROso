#!/bin/bash
#==============================================================================
# sysmonitor - Wrapper pentru System Monitor
#==============================================================================
# Acest script este destinat a fi instalat în /usr/local/bin/ sau ~/bin/
# pentru acces facil la aplicația System Monitor.
#
# INSTALARE:
#   sudo ln -sf /path/to/monitor/monitor.sh /usr/local/bin/sysmonitor
#   sau
#   cp /path/to/monitor/bin/sysmonitor ~/bin/
#
# UTILIZARE:
#   sysmonitor              # Verificare single-shot
#   sysmonitor -d           # Mod daemon
#   sysmonitor --help       # Ajutor
#==============================================================================

# Găsește directorul real al scriptului (rezolvă symlinks)
SOURCE="${BASH_SOURCE[0]}"
while [[ -L "$SOURCE" ]]; do
    DIR=$(cd -P "$(dirname "$SOURCE")" && pwd)
    SOURCE=$(readlink "$SOURCE")
    [[ "$SOURCE" != /* ]] && SOURCE="$DIR/$SOURCE"
done
WRAPPER_DIR=$(cd -P "$(dirname "$SOURCE")" && pwd)

# Calea către scriptul principal
MONITOR_SCRIPT="${WRAPPER_DIR}/../monitor.sh"

# Verifică existența scriptului principal
if [[ ! -f "$MONITOR_SCRIPT" ]]; then
    echo "EROARE: Nu găsesc scriptul principal: $MONITOR_SCRIPT" >&2
    echo "Asigurați-vă că structura directorului este intactă." >&2
    exit 1
fi

# Verifică permisiunile de execuție
if [[ ! -x "$MONITOR_SCRIPT" ]]; then
    chmod +x "$MONITOR_SCRIPT" 2>/dev/null || {
        echo "EROARE: Nu pot seta permisiunile de execuție pentru: $MONITOR_SCRIPT" >&2
        exit 1
    }
fi

# Execută scriptul principal cu toate argumentele
exec "$MONITOR_SCRIPT" "$@"
