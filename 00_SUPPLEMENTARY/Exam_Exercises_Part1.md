# SO - ExerciÈ›ii, Diagrame È™i ÃntrebÄƒri de Examen

## Partea 1: SÄƒptÄƒmÃ¢nile 1-4

> by Revolvix | ASE BucureÈ™ti - CSIE

### LegendÄƒ de dificultate

| Simbol | Nivel | Timp | Descriere |
|--------|-------|------|-----------|
| â­ | UÈ™or | 3â€“5 min | Reamintire È™i Ã®nÈ›elegere de bazÄƒ |
| â­â­ | Mediu | 5â€“10 min | Aplicarea conceptelor |
| â­â­â­ | Dificil | 10â€“15 min | AnalizÄƒ È™i calcul |
| â­â­â­â­ | Expert | 15â€“20 min | Evaluare È™i proiectare |

> ğŸ’¡ **Sfat de studiu:** ParcurgeÈ›i exerciÈ›iile fÄƒrÄƒ a consulta soluÈ›iile din prima Ã®ncercare. CronometraÈ›i-vÄƒ â€” Ã®ntrebÄƒrile de examen ar trebui sÄƒ dureze aproximativ 5 minute fiecare.



---

# SÄ‚PTÄ‚MÃ‚NA 1: Introducere Ã®n SO

## Diagrame ASCII Detaliate

### Diagrama 1.1: Straturile unui Sistem de Calcul

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                                                         â”‚
â”‚    ğŸ‘¤ UTILIZATOR                                                        â”‚
â”‚    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚    â”‚  InterfaÈ›Äƒ: CLI (bash), GUI (GNOME), Voice, Touch               â”‚  â”‚
â”‚    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                 â”‚                                        â”‚
â”‚                                 â–¼                                        â”‚
â”‚    ğŸ“¦ APLICAÈšII                                                          â”‚
â”‚    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚    â”‚  Browser â”‚ Editor â”‚ Compilator â”‚ Jocuri â”‚ Office â”‚ Media      â”‚   â”‚
â”‚    â”‚  Chrome  â”‚ VSCode â”‚ gcc        â”‚ Steam  â”‚ Libre  â”‚ VLC        â”‚   â”‚
â”‚    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                 â”‚                                        â”‚
â”‚                                 â”‚ Apeluri de sistem                           â”‚
â”‚                                 â”‚ (read, write, fork, exec...)           â”‚
â”‚                                 â–¼                                        â”‚
â”‚    ğŸ–¥ï¸ SISTEM DE OPERARE                                                  â”‚
â”‚    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚    â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚   â”‚
â”‚    â”‚  â”‚                    KERNEL                                 â”‚  â”‚   â”‚
â”‚    â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”           â”‚  â”‚   â”‚
â”‚    â”‚  â”‚  â”‚  Process   â”‚ â”‚  Memory    â”‚ â”‚   File     â”‚           â”‚  â”‚   â”‚
â”‚    â”‚  â”‚  â”‚  Manager   â”‚ â”‚  Manager   â”‚ â”‚   System   â”‚           â”‚  â”‚   â”‚
â”‚    â”‚  â”‚  â”‚            â”‚ â”‚            â”‚ â”‚            â”‚           â”‚  â”‚   â”‚
â”‚    â”‚  â”‚  â”‚ scheduler  â”‚ â”‚ paging     â”‚ â”‚ ext4, VFS  â”‚           â”‚  â”‚   â”‚
â”‚    â”‚  â”‚  â”‚ fork/exec  â”‚ â”‚ virtual    â”‚ â”‚ inodes     â”‚           â”‚  â”‚   â”‚
â”‚    â”‚  â”‚  â”‚ signals    â”‚ â”‚ allocation â”‚ â”‚ dirs       â”‚           â”‚  â”‚   â”‚
â”‚    â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜           â”‚  â”‚   â”‚
â”‚    â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”           â”‚  â”‚   â”‚
â”‚    â”‚  â”‚  â”‚   I/O      â”‚ â”‚  Network   â”‚ â”‚  Security  â”‚           â”‚  â”‚   â”‚
â”‚    â”‚  â”‚  â”‚  Manager   â”‚ â”‚   Stack    â”‚ â”‚  Module    â”‚           â”‚  â”‚   â”‚
â”‚    â”‚  â”‚  â”‚            â”‚ â”‚            â”‚ â”‚            â”‚           â”‚  â”‚   â”‚
â”‚    â”‚  â”‚  â”‚ drivers    â”‚ â”‚ TCP/IP     â”‚ â”‚ SELinux    â”‚           â”‚  â”‚   â”‚
â”‚    â”‚  â”‚  â”‚ buffering  â”‚ â”‚ sockets    â”‚ â”‚ AppArmor   â”‚           â”‚  â”‚   â”‚
â”‚    â”‚  â”‚  â”‚ scheduling â”‚ â”‚ firewall   â”‚ â”‚ cgroups    â”‚           â”‚  â”‚   â”‚
â”‚    â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜           â”‚  â”‚   â”‚
â”‚    â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚   â”‚
â”‚    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                 â”‚                                        â”‚
â”‚                                 â”‚ Hardware Abstraction Layer (HAL)       â”‚
â”‚                                 â”‚ Drivere dispozitive                    â”‚
â”‚                                 â–¼                                        â”‚
â”‚    âš™ï¸ HARDWARE                                                           â”‚
â”‚    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚    â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚   â”‚
â”‚    â”‚  â”‚   CPU   â”‚ â”‚   RAM   â”‚ â”‚  Disk   â”‚ â”‚   GPU   â”‚ â”‚ Network â”‚  â”‚   â”‚
â”‚    â”‚  â”‚ 8 cores â”‚ â”‚  16GB   â”‚ â”‚ 1TB SSD â”‚ â”‚  RTX    â”‚ â”‚  1Gbps  â”‚  â”‚   â”‚
â”‚    â”‚  â”‚ 3.6GHz  â”‚ â”‚ DDR5    â”‚ â”‚ NVMe    â”‚ â”‚  4070   â”‚ â”‚  eth0   â”‚  â”‚   â”‚
â”‚    â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚   â”‚
â”‚    â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚   â”‚
â”‚    â”‚  â”‚Keyboard â”‚ â”‚  Mouse  â”‚ â”‚ Display â”‚ â”‚  Audio  â”‚ â”‚   USB   â”‚  â”‚   â”‚
â”‚    â”‚  â”‚  HID    â”‚ â”‚  HID    â”‚ â”‚ HDMI/DP â”‚ â”‚ ALSA    â”‚ â”‚  3.2    â”‚  â”‚   â”‚
â”‚    â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚   â”‚
â”‚    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Diagrama 1.2: EvoluÈ›ia Sistemelor de Operare

```
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
                    TIMELINE - EVOLUÈšIA SO
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

1950        1960        1970        1980        1990        2000        2010
  â”‚           â”‚           â”‚           â”‚           â”‚           â”‚           â”‚
  â–¼           â–¼           â–¼           â–¼           â–¼           â–¼           â–¼

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ GENERAÈšIA 1: FÄƒrÄƒ SO (1945-1955)                                        â”‚
â”‚ â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•                                        â”‚
â”‚                                                                         â”‚
â”‚   [Cartele perforate] â”€â”€â–º [Calculator] â”€â”€â–º [ImprimantÄƒ]                â”‚
â”‚                                                                         â”‚
â”‚   â€¢ Programare Ã®n cod maÈ™inÄƒ                                           â”‚
â”‚   â€¢ Un singur program pe rÃ¢nd                                          â”‚
â”‚   â€¢ Operare manualÄƒ completÄƒ                                           â”‚
â”‚   â€¢ Utilizare CPU: ~30%                                                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                    â”‚
                                    â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ GENERAÈšIA 2: Batch Processing (1955-1965)                               â”‚
â”‚ â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•                               â”‚
â”‚                                                                         â”‚
â”‚   [Job 1]â”€â”                                                            â”‚
â”‚   [Job 2]â”€â”¼â”€â”€â–º [Batch Monitor] â”€â”€â–º [ExecuÈ›ie] â”€â”€â–º [Output]            â”‚
â”‚   [Job 3]â”€â”˜                                                            â”‚
â”‚                                                                         â”‚
â”‚   â€¢ GM-NAA I/O (1956) - primul SO                                      â”‚
â”‚   â€¢ TranziÈ›ie automatÄƒ Ã®ntre jobs                                      â”‚
â”‚   â€¢ Utilizare CPU: ~90%                                                â”‚
â”‚   â€¢ FÄƒrÄƒ interactivitate                                               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                    â”‚
                                    â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ GENERAÈšIA 3: Multiprogramare & Time-Sharing (1965-1980)                 â”‚
â”‚ â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•                 â”‚
â”‚                                                                         â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                         â”‚
â”‚   â”‚  CPU Timeline                            â”‚                         â”‚
â”‚   â”‚  â”Œâ”€â”€â”€â”â”Œâ”€â”€â”€â”â”Œâ”€â”€â”€â”â”Œâ”€â”€â”€â”â”Œâ”€â”€â”€â”â”Œâ”€â”€â”€â”         â”‚                         â”‚
â”‚   â”‚  â”‚ A â”‚â”‚ B â”‚â”‚ C â”‚â”‚ A â”‚â”‚ B â”‚â”‚ C â”‚ ...     â”‚                         â”‚
â”‚   â”‚  â””â”€â”€â”€â”˜â””â”€â”€â”€â”˜â””â”€â”€â”€â”˜â””â”€â”€â”€â”˜â””â”€â”€â”€â”˜â””â”€â”€â”€â”˜         â”‚                         â”‚
â”‚   â”‚        Time Quantum (ex: 100ms)          â”‚                         â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                         â”‚
â”‚                                                                         â”‚
â”‚   â€¢ CTSS (1961), Multics (1969), UNIX (1969)                          â”‚
â”‚   â€¢ Mai mulÈ›i utilizatori simultan                                     â”‚
â”‚   â€¢ Iluzia paralelismului                                              â”‚
â”‚   â€¢ Interactivitate!                                                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                    â”‚
                                    â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ GENERAÈšIA 4: PC & GUI (1980-2000)                                       â”‚
â”‚ â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•                                       â”‚
â”‚                                                                         â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                      â”‚
â”‚   â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚                      â”‚
â”‚   â”‚  â”‚ ğŸ“ File  ğŸ“ Edit  ğŸ‘ View  â“ Help â”‚   â”‚  GUI                   â”‚
â”‚   â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤   â”‚                      â”‚
â”‚   â”‚  â”‚  ğŸ“‚ Documents                        â”‚   â”‚                      â”‚
â”‚   â”‚  â”‚  ğŸ“‚ Pictures                         â”‚   â”‚                      â”‚
â”‚   â”‚  â”‚  ğŸ“„ readme.txt                       â”‚   â”‚                      â”‚
â”‚   â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚                      â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                      â”‚
â”‚                                                                         â”‚
â”‚   â€¢ MS-DOS (1981), Windows (1985), Mac OS (1984)                       â”‚
â”‚   â€¢ Linux (1991) - Open Source                                         â”‚
â”‚   â€¢ Un utilizator, multitasking                                        â”‚
â”‚   â€¢ GUI devine standard                                                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                    â”‚
                                    â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ GENERAÈšIA 5: Mobile & Cloud (2000-prezent)                              â”‚
â”‚ â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•                              â”‚
â”‚                                                                         â”‚
â”‚   ğŸ“± Mobile        â˜ï¸ Cloud              ğŸ³ Containers                  â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”       â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                â”‚
â”‚   â”‚ Android â”‚     â”‚    AWS      â”‚       â”‚   Docker    â”‚                â”‚
â”‚   â”‚   iOS   â”‚     â”‚   Azure     â”‚       â”‚ Kubernetes  â”‚                â”‚
â”‚   â”‚         â”‚     â”‚   GCP       â”‚       â”‚             â”‚                â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜       â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                â”‚
â”‚                                                                         â”‚
â”‚   â€¢ iOS (2007), Android (2008)                                         â”‚
â”‚   â€¢ Cloud computing, virtualizare                                      â”‚
â”‚   â€¢ Containere, microservicii                                          â”‚
â”‚   â€¢ Edge computing, IoT                                                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ExerciÈ›ii Rezolvate

### ExerciÈ›iul 1.1: Identificarea FuncÈ›iilor SO

CerinÈ›Äƒ: Pentru fiecare scenariu, identificÄƒ funcÈ›ia SO implicatÄƒ.

| # | Scenariu | FuncÈ›ia SO | ExplicaÈ›ie |
|---|----------|------------|------------|
| a | Lansezi Chrome È™i Word simultan | Gestiune procese | SO creeazÄƒ procese separate È™i planificÄƒ execuÈ›ia |
| b | Salvezi un document pe disc | Gestiune fiÈ™iere | SO scrie datele Ã®n sistemul de fiÈ™iere |
| c | Chrome nu poate citi datele Word | ProtecÈ›ie memorie | SO izoleazÄƒ spaÈ›iile de adrese |
| d | CiteÈ™ti de pe USB | Gestiune I/O | SO comunicÄƒ cu driver-ul USB |
| e | Te autentifici cu parolÄƒ | Securitate | SO verificÄƒ credenÈ›ialele |

---

### ExerciÈ›iul 1.2: Clasificarea SO

CerinÈ›Äƒ: ClasificÄƒ urmÄƒtoarele SO È™i justificÄƒ.

| SO | Tip | Justificare |
|----|-----|-------------|
| Windows 11 | Desktop, Hibrid | GUI focus, kernel NT hibrid |
| Ubuntu Server | Server, Monolitic | FÄƒrÄƒ GUI, Linux kernel monolitic |
| FreeRTOS | RTOS, Embedded | Timp real, pentru microcontrollere |
| Android | Mobile, Linux-based | Smartphone-uri, kernel Linux modificat |
| macOS | Desktop, Hibrid | XNU kernel (Mach microkernel + BSD) |

---

### ExerciÈ›iul 1.3: Calcul Batch Processing

ProblemÄƒ: Un sistem batch proceseazÄƒ 5 job-uri cu timpii:
- Job A: 10 minute
- Job B: 5 minute  
- Job C: 15 minute
- Job D: 8 minute
- Job E: 12 minute

CerinÈ›e:
1. CalculeazÄƒ timpul total de procesare
2. CalculeazÄƒ timpul mediu de turnaround
3. CalculeazÄƒ timpul mediu de aÈ™teptare

SoluÈ›ie:

```
Gantt Chart (FCFS, ordinea A-B-C-D-E):
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚    A     â”‚  B  â”‚      C        â”‚   D    â”‚     E      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
0         10    15              30       38           50

1. Timpul total = 10 + 5 + 15 + 8 + 12 = 50 minute

2. Turnaround time (completion - arrival, toate sosesc la t=0):
   - A: 10 - 0 = 10 min
   - B: 15 - 0 = 15 min
   - C: 30 - 0 = 30 min
   - D: 38 - 0 = 38 min
   - E: 50 - 0 = 50 min
   
   Media = (10 + 15 + 30 + 38 + 50) / 5 = 143 / 5 = 28.6 minute

3. Waiting time (turnaround - burst):
   - A: 10 - 10 = 0 min
   - B: 15 - 5 = 10 min
   - C: 30 - 15 = 15 min
   - D: 38 - 8 = 30 min
   - E: 50 - 12 = 38 min
   
   Media = (0 + 10 + 15 + 30 + 38) / 5 = 93 / 5 = 18.6 minute
```

---

## ÃntrebÄƒri Tip Examen

### ÃntrebÄƒri GrilÄƒ (1 punct fiecare)

1.1 Care dintre urmÄƒtoarele NU este o funcÈ›ie principalÄƒ a SO?
- a) Gestiunea memoriei
- b) Compilarea programelor âœ“
- c) Gestiunea proceselor
- d) Gestiunea I/O

RÄƒspuns: b) - Compilatorul este un program de aplicaÈ›ie, nu o funcÈ›ie SO.

---

1.2 Ãn ce an a fost creat UNIX?
- a) 1956
- b) 1969 âœ“
- c) 1981
- d) 1991

RÄƒspuns: b) - 1969, de Ken Thompson È™i Dennis Ritchie la Bell Labs.

---

1.3 Care arhitecturÄƒ de kernel permite ca un driver de reÈ›ea sÄƒ crashuieze fÄƒrÄƒ a afecta restul sistemului?
- a) Kernel monolitic
- b) Microkernel âœ“
- c) Kernel hibrid
- d) Exokernel

RÄƒspuns: b) - Ãn microkernel, driverele ruleazÄƒ Ã®n user space ca servere separate.

---

### ÃntrebÄƒri cu Dezvoltare (3-5 puncte)

1.4 (3p) ExplicaÈ›i diferenÈ›a dintre kernel monolitic È™i microkernel, dÃ¢nd cÃ¢te un exemplu de SO pentru fiecare.

RÄƒspuns model:

| Aspect | Kernel Monolitic | Microkernel |
|--------|------------------|-------------|
| StructurÄƒ | Tot codul kernel Ã®n acelaÈ™i spaÈ›iu | Doar funcÈ›ii minimale Ã®n kernel |
| Componente Ã®n kernel | Scheduler, MM, FS, drivere | Doar IPC, basic planificare |
| Comunicare | Apeluri directe de funcÈ›ii | Message passing (IPC) |
| PerformanÈ›Äƒ | Mai rapidÄƒ (fÄƒrÄƒ overhead IPC) | Overhead pentru mesaje |
| Fiabilitate | Un bug poate crÄƒpa tot sistemul | Izolare - componentele pot crÄƒpa separat |
| Exemplu | Linux, FreeBSD | Minix, QNX, seL4 |

---

1.5 (5p) Un sistem de batch processing primeÈ™te 4 job-uri Ã®n ordinea: J1(burst=6), J2(burst=2), J3(burst=8), J4(burst=3). Toate sosesc la t=0.

a) DesenaÈ›i diagrama Gantt pentru FCFS
b) CalculaÈ›i timpul mediu de aÈ™teptare pentru FCFS
c) Cum s-ar schimba dacÄƒ folosim SJF? CalculaÈ›i noul timp mediu de aÈ™teptare.
d) Ce concluzie trageÈ›i?

RÄƒspuns model:

```
a) FCFS Gantt Chart:
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”
â”‚   J1   â”‚ J2 â”‚    J3    â”‚ J4  â”‚
â”‚   6    â”‚ 2  â”‚    8     â”‚  3  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”˜
0        6    8         16    19

b) FCFS Waiting times:
   J1: 0
   J2: 6
   J3: 8
   J4: 16
   Media = (0 + 6 + 8 + 16) / 4 = 30 / 4 = 7.5 minute

c) SJF (ordinea dupÄƒ burst: J2, J4, J1, J3):
â”Œâ”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ J2 â”‚ J4  â”‚   J1   â”‚    J3    â”‚
â”‚ 2  â”‚  3  â”‚   6    â”‚    8     â”‚
â””â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
0    2     5       11         19

SJF Waiting times:
   J1: 5
   J2: 0
   J3: 11
   J4: 2
   Media = (5 + 0 + 11 + 2) / 4 = 18 / 4 = 4.5 minute

d) Concluzie: SJF reduce timpul mediu de aÈ™teptare de la 7.5 la 4.5 minute 
   (reducere de 40%), confirmÃ¢nd cÄƒ SJF este optimal pentru acest criteriu.
```

---

# SÄ‚PTÄ‚MÃ‚NA 2: Apeluri de sistem

## Diagrame ASCII Detaliate

### Diagrama 2.1: Mecanismul apel de sistem (Detaliat)

```
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
                    MECANISMUL SYSTEM CALL - DETALIAT
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

    USER SPACE                                    KERNEL SPACE
    â•â•â•â•â•â•â•â•â•â•                                    â•â•â•â•â•â•â•â•â•â•â•â•
    
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  AplicaÈ›ie C        â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  â”‚
â”‚  int fd = open(     â”‚
â”‚    "/tmp/file.txt", â”‚
â”‚    O_RDONLY         â”‚
â”‚  );                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
          â”‚ 1. Apel funcÈ›ie libc
          â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  glibc wrapper      â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  â”‚
â”‚  open():            â”‚
â”‚    mov $2, %rax     â”‚  // syscall number pentru open = 2
â”‚    mov path, %rdi   â”‚  // primul argument
â”‚    mov flags, %rsi  â”‚  // al doilea argument
â”‚    mov mode, %rdx   â”‚  // al treilea argument
â”‚    syscall          â”‚  // 2. InstrucÈ›iune SYSCALL
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
          â”‚
          â”‚ â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
          â”‚              GRANIÈšA USER/KERNEL (Ring 3 â†’ Ring 0)
          â”‚ â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
          â”‚
          â”‚ 3. CPU salveazÄƒ starea:
          â”‚    - RIP (return address) â†’ Ã®n registru special
          â”‚    - RFLAGS â†’ Ã®n registru special
          â”‚    - ComutÄƒ la Ring 0 (kernel mode)
          â”‚    - ÃncarcÄƒ RSP din TSS (kernel stack)
          â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  SYSTEM CALL ENTRY POINT (entry_SYSCALL_64)                             â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                          â”‚
â”‚  4. SalveazÄƒ registrele pe kernel stack:                                â”‚
â”‚     push %rcx, %r11, %rax, %rdi, %rsi, %rdx, %r10, %r8, %r9            â”‚
â”‚                                                                         â”‚
â”‚  5. VerificÄƒ syscall number valid (0 â‰¤ %rax < NR_syscalls)             â”‚
â”‚                                                                         â”‚
â”‚  6. Lookup Ã®n sys_call_table:                                          â”‚
â”‚     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                 â”‚
â”‚     â”‚  sys_call_table[__NR_open] = sys_open          â”‚                 â”‚
â”‚     â”‚                                                â”‚                 â”‚
â”‚     â”‚  Index â”‚ Handler          â”‚ Descriere          â”‚                 â”‚
â”‚     â”‚  â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚                 â”‚
â”‚     â”‚    0   â”‚ sys_read         â”‚ Citire din fd      â”‚                 â”‚
â”‚     â”‚    1   â”‚ sys_write        â”‚ Scriere Ã®n fd      â”‚                 â”‚
â”‚     â”‚    2   â”‚ sys_open   â—„â”€â”€â”€â”€ â”‚ Deschidere fiÈ™ier  â”‚                 â”‚
â”‚     â”‚    3   â”‚ sys_close        â”‚ Ãnchidere fd       â”‚                 â”‚
â”‚     â”‚   ...  â”‚ ...              â”‚ ...                â”‚                 â”‚
â”‚     â”‚  435   â”‚ sys_clone3       â”‚ Clone process      â”‚                 â”‚
â”‚     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                 â”‚
â”‚                                                                         â”‚
â”‚  7. ApeleazÄƒ sys_open(path, flags, mode)                               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                 â”‚
                                 â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  sys_open() - Implementare Ã®n Kernel                                    â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                                     â”‚
â”‚                                                                         â”‚
â”‚  a) CopiazÄƒ path din user space Ã®n kernel space (copy_from_user)       â”‚
â”‚  b) VerificÄƒ permisiuni (can current user access this file?)           â”‚
â”‚  c) CautÄƒ inode-ul fiÈ™ierului Ã®n VFS                                   â”‚
â”‚  d) AlocÄƒ un nou file descriptor Ã®n tabela procesului                  â”‚
â”‚  e) CreeazÄƒ structura file pentru acest open                           â”‚
â”‚  f) ReturneazÄƒ fd (sau eroare negativÄƒ)                                â”‚
â”‚                                                                         â”‚
â”‚  return fd;  // ex: 3 (primele 3: 0=stdin, 1=stdout, 2=stderr)        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                 â”‚
                                 â”‚ 8. Rezultat Ã®n %rax
                                 â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  SYSTEM CALL EXIT                                                       â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                                                       â”‚
â”‚  9. RestaureazÄƒ registrele de pe kernel stack                          â”‚
â”‚  10. VerificÄƒ dacÄƒ sunt semnale pending                                â”‚
â”‚  11. ExecutÄƒ SYSRET (sau IRET)                                         â”‚
â”‚      - ComutÄƒ Ã®napoi la Ring 3                                         â”‚
â”‚      - RestaureazÄƒ RIP, RFLAGS, RSP                                    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                 â”‚
          â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
                         ÃNAPOI ÃN USER SPACE
          â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
                                 â”‚
                                 â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  glibc wrapper      â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  â”‚
â”‚  12. VerificÄƒ %rax: â”‚
â”‚     if (rax < 0)    â”‚
â”‚       errno = -rax; â”‚
â”‚       return -1;    â”‚
â”‚     return rax;     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
          â”‚
          â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  AplicaÈ›ie          â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  â”‚
â”‚  fd = 3             â”‚
â”‚  // Succes!         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Diagrama 2.2: Categorii de Apeluri de sistem

```
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
                    CATEGORII DE SYSTEM CALLS
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                           SYSTEM CALLS                                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                â”‚
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚                       â”‚                       â”‚
        â–¼                       â–¼                       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”       â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”       â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   PROCESE     â”‚       â”‚   FIÈ˜IERE     â”‚       â”‚   MEMORIE     â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤       â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤       â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ fork()        â”‚       â”‚ open()        â”‚       â”‚ brk()         â”‚
â”‚ exec()        â”‚       â”‚ close()       â”‚       â”‚ mmap()        â”‚
â”‚ exit()        â”‚       â”‚ read()        â”‚       â”‚ munmap()      â”‚
â”‚ wait()        â”‚       â”‚ write()       â”‚       â”‚ mprotect()    â”‚
â”‚ clone()       â”‚       â”‚ lseek()       â”‚       â”‚ mlock()       â”‚
â”‚ getpid()      â”‚       â”‚ stat()        â”‚       â”‚ mremap()      â”‚
â”‚ getppid()     â”‚       â”‚ fstat()       â”‚       â”‚               â”‚
â”‚ nice()        â”‚       â”‚ dup()         â”‚       â”‚               â”‚
â”‚ kill()        â”‚       â”‚ pipe()        â”‚       â”‚               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜       â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜       â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚                       â”‚                       â”‚
        â–¼                       â–¼                       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”       â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”       â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   DIRECTOARE  â”‚       â”‚    REÈšEA      â”‚       â”‚  DISPOZITIVE  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤       â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤       â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ mkdir()       â”‚       â”‚ socket()      â”‚       â”‚ ioctl()       â”‚
â”‚ rmdir()       â”‚       â”‚ bind()        â”‚       â”‚ select()      â”‚
â”‚ chdir()       â”‚       â”‚ listen()      â”‚       â”‚ poll()        â”‚
â”‚ getcwd()      â”‚       â”‚ accept()      â”‚       â”‚ epoll_*()     â”‚
â”‚ opendir()     â”‚       â”‚ connect()     â”‚       â”‚               â”‚
â”‚ readdir()     â”‚       â”‚ send()        â”‚       â”‚               â”‚
â”‚ link()        â”‚       â”‚ recv()        â”‚       â”‚               â”‚
â”‚ unlink()      â”‚       â”‚ shutdown()    â”‚       â”‚               â”‚
â”‚ rename()      â”‚       â”‚               â”‚       â”‚               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜       â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜       â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚                                               â”‚
        â–¼                                               â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                               â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   SEMNALE     â”‚                               â”‚   TIMP        â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤                               â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ signal()      â”‚                               â”‚ time()        â”‚
â”‚ sigaction()   â”‚                               â”‚ gettimeofday()â”‚
â”‚ sigprocmask() â”‚                               â”‚ clock_gettime()
â”‚ sigsuspend()  â”‚                               â”‚ nanosleep()   â”‚
â”‚ sigpending()  â”‚                               â”‚ alarm()       â”‚
â”‚ sigwait()     â”‚                               â”‚ setitimer()   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                               â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ExerciÈ›ii Rezolvate

### ExerciÈ›iul 2.1: Analiza strace

CerinÈ›Äƒ: AnalizeazÄƒ output-ul `strace ls /tmp` È™i identificÄƒ fiecare categorie de apel de sistem.

```bash
$ strace ls /tmp 2>&1 | head -20

execve("/bin/ls", ["ls", "/tmp"], 0x7fff...) = 0
brk(NULL)                                = 0x55a8...
openat(AT_FDCWD, "/etc/ld.so.cache", O_RDONLY|O_CLOEXEC) = 3
fstat(3, {st_mode=S_IFREG|0644, ...})    = 0
mmap(NULL, 123456, PROT_READ, ...)       = 0x7f...
close(3)                                 = 0
openat(AT_FDCWD, "/lib/x86_64.../libc.so.6", O_RDONLY) = 3
read(3, "\177ELF...", 832)               = 832
close(3)                                 = 0
...
openat(AT_FDCWD, "/tmp", O_RDONLY|O_DIRECTORY) = 3
getdents64(3, /* 5 entries */, 32768)    = 152
write(1, "file1.txt  file2.txt\n", 22)   = 22
close(3)                                 = 0
exit_group(0)                            = ?
```

SoluÈ›ie:

| apel de sistem | Categorie | Scop |
|---------|-----------|------|
| `execve` | Procese | ÃncarcÄƒ È™i executÄƒ binarul `/bin/ls` |
| `brk` | Memorie | AlocÄƒ/dezalocÄƒ heap |
| `openat` | FiÈ™iere | Deschide fiÈ™ier/director |
| `fstat` | FiÈ™iere | ObÈ›ine metadate fiÈ™ier |
| `mmap` | Memorie | MapeazÄƒ memorie (Ã®ncarcÄƒ biblioteci) |
| `close` | FiÈ™iere | Ãnchide file descriptor |
| `read` | FiÈ™iere | CiteÈ™te din file descriptor |
| `getdents64` | Directoare | CiteÈ™te intrÄƒrile din director |
| `write` | FiÈ™iere | Scrie output pe stdout (fd=1) |
| `exit_group` | Procese | TerminÄƒ procesul |

---

### ExerciÈ›iul 2.2: Calcul EAT (Effective Access Time)

ProblemÄƒ: Un sistem are:
- Timp acces memorie: 100 ns
- Overhead apel de sistem (tranziÈ›ie userâ†”kernel): 500 ns
- Timp procesare kernel: 200 ns

CalculeazÄƒ timpul efectiv pentru:
a) Un acces direct la memorie (variabilÄƒ localÄƒ)
b) Un apel de sistem `getpid()` (fÄƒrÄƒ acces disc)
c) Un apel de sistem `read()` care citeÈ™te din cache

SoluÈ›ie:

```
a) Acces memorie directÄƒ:
   T = 100 ns
   (Doar un acces la RAM)

b) getpid():
   T = overhead_userâ†’kernel + procesare + overhead_kernelâ†’user
   T = 500 + 200 + 500 = 1200 ns
   
   (De 12x mai lent decÃ¢t acces memorie!)

c) read() din cache:
   T = overhead_userâ†’kernel + procesare_kernel + acces_cache + overhead_kernelâ†’user
   T = 500 + 200 + 100 + 500 = 1300 ns
   
   (Similar cu getpid, doar un acces memorie Ã®n plus pentru date din cache)
```

---

## ÃntrebÄƒri Tip Examen

### ÃntrebÄƒri GrilÄƒ

2.1 Ce instrucÈ›iune x86-64 declanÈ™eazÄƒ un apel de sistem Ã®n Linux modern?
- a) int 0x80
- b) sysenter
- c) apel de sistem âœ“
- d) trap

RÄƒspuns: c) - `apel de sistem` este instrucÈ›iunea standard pe x86-64.

---

2.2 Unde se aflÄƒ numÄƒrul apel de sistem cÃ¢nd se executÄƒ instrucÈ›iunea `apel de sistem`?
- a) Ãn memorie
- b) Pe stivÄƒ
- c) Ãn registrul %rdi
- d) Ãn registrul %rax âœ“

RÄƒspuns: d) - ConvenÈ›ia Linux: apel de sistem number Ã®n %rax.

---

2.3 Ce returneazÄƒ `fork()` Ã®n procesul pÄƒrinte?
- a) 0
- b) -1
- c) PID-ul copilului âœ“
- d) PID-ul propriu

RÄƒspuns: c) - PÄƒrintele primeÈ™te PID-ul copilului; copilul primeÈ™te 0.

---

### ÃntrebÄƒri cu Dezvoltare

2.4 (5p) ExplicaÈ›i de ce este necesar ca apeluri de sistem sÄƒ existe. De ce aplicaÈ›iile nu pot accesa direct hardware-ul?

RÄƒspuns model:

apeluri de sistem sunt necesare din mai multe motive fundamentale:

1. ProtecÈ›ie (2p):
   - FÄƒrÄƒ apeluri de sistem, orice aplicaÈ›ie ar putea accesa orice zonÄƒ de memorie
   - Un bug sau program maliÈ›ios ar putea corupe datele altor procese sau ale kernelului
   - apeluri de sistem permit kernelului sÄƒ verifice permisiunile Ã®nainte de fiecare operaÈ›ie

2. Abstractizare (1.5p):
   - AplicaÈ›iile nu trebuie sÄƒ cunoascÄƒ detaliile hardware-ului
   - AcelaÈ™i cod funcÈ›ioneazÄƒ pe diferite tipuri de discuri, plÄƒci de reÈ›ea, etc.
   - Kernel-ul oferÄƒ o interfaÈ›Äƒ uniformÄƒ (POSIX)

3. Coordonare (1.5p):
   - Mai multe procese vor sÄƒ acceseze aceeaÈ™i resursÄƒ (disc, reÈ›ea)
   - Kernel-ul serializes accesul È™i previne conflicte
   - AsigurÄƒ fairness Ã®n alocarea resurselor

Exemplu concret: FÄƒrÄƒ apeluri de sistem, douÄƒ procese ar putea scrie simultan pe acelaÈ™i sector de disc, corupÃ¢nd datele reciproc.

---

# SÄ‚PTÄ‚MÃ‚NA 3: Procese

## Diagrame ASCII Detaliate

### Diagrama 3.1: Diagrama de StÄƒri CompletÄƒ

```
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
                    DIAGRAMA DE STÄ‚RI A PROCESULUI
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

                                    CREARE PROCES
                                    (fork/exec)
                                         â”‚
                                         â–¼
                               â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                               â”‚                 â”‚
                               â”‚      NEW        â”‚
                               â”‚                 â”‚
                               â”‚  (alocare PCB,  â”‚
                               â”‚   resurse)      â”‚
                               â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                        â”‚
                                        â”‚ admitted (scheduler acceptÄƒ)
                                        â”‚
                                        â–¼
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚                                      â”‚
           â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”¤              READY                   â”‚â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
           â”‚        â”‚                                      â”‚             â”‚
           â”‚        â”‚     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”‚             â”‚
           â”‚        â”‚     â”‚    READY QUEUE          â”‚     â”‚             â”‚
           â”‚        â”‚     â”‚  â”Œâ”€â”€â”€â” â”Œâ”€â”€â”€â” â”Œâ”€â”€â”€â”     â”‚     â”‚             â”‚
           â”‚        â”‚     â”‚  â”‚P2 â”‚â†’â”‚P5 â”‚â†’â”‚P3 â”‚â†’... â”‚     â”‚             â”‚
           â”‚        â”‚     â”‚  â””â”€â”€â”€â”˜ â””â”€â”€â”€â”˜ â””â”€â”€â”€â”˜     â”‚     â”‚             â”‚
           â”‚        â”‚     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â”‚             â”‚
           â”‚        â”‚                                      â”‚             â”‚
           â”‚        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜             â”‚
           â”‚                           â”‚                                 â”‚
           â”‚                           â”‚ dispatch                        â”‚
           â”‚                           â”‚ (scheduler alege)               â”‚
           â”‚     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤                                 â”‚
           â”‚     â”‚                     â”‚                                 â”‚
           â”‚     â”‚                     â–¼                                 â”‚
           â”‚     â”‚         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                      â”‚
           â”‚     â”‚         â”‚                     â”‚                      â”‚
           â”‚     â”‚         â”‚      RUNNING        â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
           â”‚     â”‚         â”‚                     â”‚     preemption       â”‚
           â”‚     â”‚         â”‚   (pe CPU acum)     â”‚   (timer interrupt,  â”‚
           â”‚     â”‚         â”‚                     â”‚    higher priority)  â”‚
           â”‚     â”‚         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                      â”‚
           â”‚     â”‚                    â”‚                                 â”‚
           â”‚     â”‚      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                   â”‚
           â”‚     â”‚      â”‚             â”‚             â”‚                   â”‚
           â”‚     â”‚      â–¼             â–¼             â–¼                   â”‚
           â”‚     â”‚  I/O request   terminate    child wait              â”‚
           â”‚     â”‚  (read/write)   (exit)      (fork)                  â”‚
           â”‚     â”‚      â”‚             â”‚             â”‚                   â”‚
           â”‚     â”‚      â”‚             â”‚             â”‚                   â”‚
           â”‚     â”‚      â–¼             â”‚             â–¼                   â”‚
           â”‚     â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”        â”‚      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”           â”‚
           â”‚     â”‚ â”‚         â”‚        â”‚      â”‚   WAITING   â”‚           â”‚
           â”‚     â”‚ â”‚ WAITING â”‚        â”‚      â”‚  (for child)â”‚           â”‚
           â”‚     â”‚ â”‚ (I/O)   â”‚        â”‚      â”‚             â”‚           â”‚
           â”‚     â”‚ â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜        â”‚      â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜           â”‚
           â”‚     â”‚      â”‚             â”‚             â”‚                   â”‚
           â”‚     â”‚      â”‚ I/O         â”‚             â”‚ child exits       â”‚
           â”‚     â”‚      â”‚ complete    â”‚             â”‚ (SIGCHLD)        â”‚
           â”‚     â”‚      â”‚             â”‚             â”‚                   â”‚
           â”‚     â””â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                   â”‚
           â”‚                          â”‚                                 â”‚
           â”‚                          â–¼                                 â”‚
           â”‚              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                       â”‚
           â”‚              â”‚                     â”‚                       â”‚
           â”‚              â”‚    TERMINATED       â”‚                       â”‚
           â”‚              â”‚     (ZOMBIE)        â”‚                       â”‚
           â”‚              â”‚                     â”‚                       â”‚
           â”‚              â”‚  (aÈ™teaptÄƒ wait()   â”‚                       â”‚
           â”‚              â”‚   de la pÄƒrinte)    â”‚                       â”‚
           â”‚              â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                       â”‚
           â”‚                         â”‚                                  â”‚
           â”‚                         â”‚ parent calls wait()              â”‚
           â”‚                         â”‚ (reaps zombie)                   â”‚
           â”‚                         â–¼                                  â”‚
           â”‚              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                       â”‚
           â”‚              â”‚                     â”‚                       â”‚
           â”‚              â”‚       DEAD          â”‚                       â”‚
           â”‚              â”‚  (PCB eliberat)     â”‚                       â”‚
           â”‚              â”‚                     â”‚                       â”‚
           â”‚              â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                       â”‚
           â”‚                                                            â”‚
           â”‚                                                            â”‚
           â”‚              BLOCKED/WAITING QUEUE                         â”‚
           â”‚              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
           â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤  Disc I/O: P7, P9, P12                 â”‚â”€â”€â”€â”˜
                          â”‚  Network:  P4, P8                       â”‚
                          â”‚  Pipe:     P6                           â”‚
                          â”‚  Sleep:    P10, P11                     â”‚
                          â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                        â”‚
                                        â”‚ event occurs
                                        â”‚ (I/O complete, signal, etc.)
                                        â”‚
                                        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–º moves to READY
```

### Diagrama 3.2: fork() È™i Copy-on-Write

```
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
                    FORK() È˜I COPY-ON-WRITE
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

ÃNAINTE DE FORK():
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

Proces PÄƒrinte (PID: 1000)
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Virtual Address Space                                     â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚ 0xFFFF... â”‚ Kernel Space (shared)                   â”‚  â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤  â”‚
â”‚  â”‚ 0x7FFF... â”‚ Stack    [var_a=5, var_b=10]           â”‚  â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤  â”‚
â”‚  â”‚           â”‚                                         â”‚  â”‚
â”‚  â”‚           â”‚ (free)                                  â”‚  â”‚
â”‚  â”‚           â”‚                                         â”‚  â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤  â”‚
â”‚  â”‚ 0x5555... â”‚ Heap     [malloc_data="Hello"]         â”‚  â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤  â”‚
â”‚  â”‚ 0x4000... â”‚ Data     [global_x=100]                â”‚  â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤  â”‚
â”‚  â”‚ 0x1000... â”‚ Text     [instructions...]             â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                                            â”‚
â”‚  Page Table:                                               â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                    â”‚
â”‚  â”‚ VPage   â”‚ Frame   â”‚ Permissions   â”‚                    â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤                    â”‚
â”‚  â”‚    0    â”‚   100   â”‚ R-X (text)    â”‚                    â”‚
â”‚  â”‚    1    â”‚   101   â”‚ RW- (data)    â”‚                    â”‚
â”‚  â”‚    2    â”‚   102   â”‚ RW- (heap)    â”‚                    â”‚
â”‚  â”‚   ...   â”‚   ...   â”‚ ...           â”‚                    â”‚
â”‚  â”‚  1023   â”‚   150   â”‚ RW- (stack)   â”‚                    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
            â”‚
            â”‚ Memoria FizicÄƒ
            â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Frame 100: [text instructions]        â”‚
â”‚  Frame 101: [global_x=100]             â”‚
â”‚  Frame 102: [malloc_data="Hello"]      â”‚
â”‚  ...                                   â”‚
â”‚  Frame 150: [var_a=5, var_b=10]        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

IMEDIAT DUPÄ‚ FORK() - Copy-on-Write:
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

         PÄ‚RINTE (PID: 1000)                    COPIL (PID: 1001)
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Page Table Parent             â”‚    â”‚  Page Table Child              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚    â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚ VPage  â”‚ Frame â”‚ Perms   â”‚  â”‚    â”‚  â”‚ VPage  â”‚ Frame â”‚ Perms   â”‚  â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤  â”‚    â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤  â”‚
â”‚  â”‚   0    â”‚  100  â”‚ R-X     â”‚  â”‚    â”‚  â”‚   0    â”‚  100  â”‚ R-X     â”‚  â”‚
â”‚  â”‚   1    â”‚  101  â”‚ R-- CoW â”‚â—„â”€â”¼â”€â”€â”€â”€â”¼â”€â–ºâ”‚   1    â”‚  101  â”‚ R-- CoW â”‚  â”‚
â”‚  â”‚   2    â”‚  102  â”‚ R-- CoW â”‚â—„â”€â”¼â”€â”€â”€â”€â”¼â”€â–ºâ”‚   2    â”‚  102  â”‚ R-- CoW â”‚  â”‚
â”‚  â”‚  1023  â”‚  150  â”‚ R-- CoW â”‚â—„â”€â”¼â”€â”€â”€â”€â”¼â”€â–ºâ”‚  1023  â”‚  150  â”‚ R-- CoW â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚    â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                â”‚                                     â”‚
                â”‚         PAGINI PARTAJATE            â”‚
                â”‚    (marcate Read-Only + CoW flag)   â”‚
                â–¼                                     â–¼
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚  Frame 100: [text] â”€â”€â”€â”€â”€â”€ Partajat (R-X)         â”‚
        â”‚  Frame 101: [data] â”€â”€â”€â”€â”€â”€ Partajat (CoW)         â”‚
        â”‚  Frame 102: [heap] â”€â”€â”€â”€â”€â”€ Partajat (CoW)         â”‚
        â”‚  Frame 150: [stack] â”€â”€â”€â”€â”€ Partajat (CoW)         â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

DUPÄ‚ CE COPILUL SCRIE (global_x = 200):
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

1. Copilul Ã®ncearcÄƒ sÄƒ scrie Ã®n pagina 1 (data segment)
2. Page Fault! (pagina e marcatÄƒ Read-Only)
3. Kernel-ul vede flag-ul CoW
4. Kernel-ul:
   a. AlocÄƒ un nou frame (103)
   b. CopiazÄƒ conÈ›inutul frame 101 â†’ frame 103
   c. ActualizeazÄƒ page table copil: pagina 1 â†’ frame 103 (RW-)
   d. LasÄƒ page table pÄƒrinte: pagina 1 â†’ frame 101 (acum poate fi RW-)
5. Copilul scrie Ã®n frame 103

         PÄ‚RINTE (PID: 1000)                    COPIL (PID: 1001)
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Page Table Parent             â”‚    â”‚  Page Table Child              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚    â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚ VPage  â”‚ Frame â”‚ Perms   â”‚  â”‚    â”‚  â”‚ VPage  â”‚ Frame â”‚ Perms   â”‚  â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤  â”‚    â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤  â”‚
â”‚  â”‚   0    â”‚  100  â”‚ R-X     â”‚  â”‚    â”‚  â”‚   0    â”‚  100  â”‚ R-X     â”‚  â”‚
â”‚  â”‚   1    â”‚  101  â”‚ RW-     â”‚  â”‚    â”‚  â”‚   1    â”‚  103  â”‚ RW-     â”‚  â”‚ â† COPIAT!
â”‚  â”‚   2    â”‚  102  â”‚ R-- CoW â”‚â—„â”€â”¼â”€â”€â”€â”€â”¼â”€â–ºâ”‚   2    â”‚  102  â”‚ R-- CoW â”‚  â”‚
â”‚  â”‚  1023  â”‚  150  â”‚ R-- CoW â”‚â—„â”€â”¼â”€â”€â”€â”€â”¼â”€â–ºâ”‚  1023  â”‚  150  â”‚ R-- CoW â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚    â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

        Memoria FizicÄƒ:
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚  Frame 100: [text] â”€â”€â”€â”€â”€â”€ Partajat               â”‚
        â”‚  Frame 101: [global_x=100] â”€â”€ Doar PÄƒrinte       â”‚
        â”‚  Frame 102: [heap] â”€â”€â”€â”€â”€â”€ Partajat               â”‚
        â”‚  Frame 103: [global_x=200] â”€â”€ Doar Copil (NOU!)  â”‚
        â”‚  Frame 150: [stack] â”€â”€â”€â”€â”€ Partajat               â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ExerciÈ›ii Rezolvate

### ExerciÈ›iul 3.1: Arbore de Procese

ProblemÄƒ: Ce output produce urmÄƒtorul cod?

```c
int main() {
    fork();
    fork();
    printf("X\n");
    return 0;
}
```

SoluÈ›ie:

```
SÄƒ urmÄƒrim execuÈ›ia:

IniÈ›ial: 1 proces (A)

DupÄƒ primul fork():
  A (pÄƒrinte)
  â””â”€â”€ B (copil)
  
  Total: 2 procese

DupÄƒ al doilea fork() (executat de AMBELE procese):
  A executÄƒ fork() â†’ creeazÄƒ C
  B executÄƒ fork() â†’ creeazÄƒ D
  
  A â”€â”€â”€â”€ (primul fork) â”€â”€â”€â–º B
  â”‚                         â”‚
  â”‚ (al doilea fork)        â”‚ (al doilea fork)
  â–¼                         â–¼
  C                         D

Arbore final:
       A
      / \
     B   C
     |
     D

Total: 4 procese

Fiecare proces executÄƒ printf("X\n"):
Output: X X X X (4 linii cu X)

Formula generalÄƒ: 2^n procese pentru n apeluri fork() consecutive
(dacÄƒ toate fork-urile reuÈ™esc)
```

---

### ExerciÈ›iul 3.2: Analiza PCB

ProblemÄƒ: Din output-ul de mai jos, identificÄƒ informaÈ›iile cheie:

```bash
$ cat /proc/1234/status
Name:   python3
State:  S (sleeping)
Pid:    1234
PPid:   1100
Uid:    1000    1000    1000    1000
VmSize: 125000 kB
VmRSS:  45000 kB
Fire de execuÈ›ie: 4
voluntary_ctxt_switches:        1523
nonvoluntary_ctxt_switches:     89
```

SoluÈ›ie:

| CÃ¢mp | Valoare | Interpretare |
|------|---------|--------------|
| Name | python3 | Numele executabilului |
| State | S (sleeping) | Procesul aÈ™teaptÄƒ (blocked pe I/O sau sleep) |
| Pid | 1234 | Process ID |
| PPid | 1100 | PID-ul pÄƒrintelui |
| Uid | 1000 | User ID (real, effective, saved, fs) - toate 1000 |
| VmSize | 125000 kB (~122 MB) | Memorie virtualÄƒ totalÄƒ alocatÄƒ |
| VmRSS | 45000 kB (~44 MB) | Memorie fizicÄƒ efectiv folositÄƒ (Resident Set) |
| Fire de execuÈ›ie | 4 | NumÄƒrul de fir de execuÈ›ie-uri |
| voluntary_ctxt_switches | 1523 | CÃ¢te schimbÄƒri de context voluntare (ex: wait pe I/O) |
| nonvoluntary_ctxt_switches | 89 | CÃ¢te preempÈ›ii (timer interrupt, prioritate mai mare) |

ObservaÈ›ii:
- Procesul foloseÈ™te doar 36% din memoria virtualÄƒ alocatÄƒ (45/125 MB)
- Raportul voluntary/nonvoluntary (17:1) sugereazÄƒ un proces I/O-bound
- 4 fire de execuÈ›ie Ã®ntr-un singur proces Python

---

## ÃntrebÄƒri Tip Examen

3.1 (GrilÄƒ) Ce valoare returneazÄƒ `fork()` Ã®n procesul copil?
- a) PID-ul copilului
- b) PID-ul pÄƒrintelui
- c) 0 âœ“
- d) -1

---

3.2 (GrilÄƒ) Un proces zombie este:
- a) Un proces blocat Ã®n aÈ™teptarea I/O
- b) Un proces terminat dar al cÄƒrui PCB nu a fost Ã®ncÄƒ eliberat âœ“
- c) Un proces care consumÄƒ 100% CPU
- d) Un proces fÄƒrÄƒ pÄƒrinte

---

3.3 (5p) ExplicaÈ›i mecanismul Copy-on-Write È™i de ce este esenÈ›ial pentru eficienÈ›a fork().

RÄƒspuns model:

Ce este CoW? (1p)
Copy-on-Write este o tehnicÄƒ de optimizare care amÃ¢nÄƒ copierea paginilor de memorie pÃ¢nÄƒ cÃ¢nd una dintre copii Ã®ncearcÄƒ sÄƒ scrie Ã®n paginÄƒ.

Cum funcÈ›ioneazÄƒ? (2p)
1. La fork(), kernel-ul NU copiazÄƒ paginile de memorie
2. Ambele procese partajeazÄƒ aceleaÈ™i frame-uri fizice
3. Paginile sunt marcate Read-Only (chiar dacÄƒ erau RW)
4. La prima scriere â†’ Page Fault â†’ Kernel copiazÄƒ pagina â†’ ActualizeazÄƒ page tables

De ce e esenÈ›ial? (2p)
- Fork() tradiÈ›ional copia Ã®ntreaga memorie (~100+ MB) = lent
- Cu CoW, fork() doar copiazÄƒ page tables (~KB) = rapid
- Multe procese copil fac exec() imediat â†’ nu ar fi folosit datele copiate
- Paginile code (text segment) nu sunt niciodatÄƒ copiate (read-only oricum)

Exemplu concret: Shell-ul face fork() + exec() pentru fiecare comandÄƒ. FÄƒrÄƒ CoW, ar copia zeci de MB de fiecare datÄƒ. Cu CoW, copiazÄƒ doar cÃ¢teva KB.

---

# SÄ‚PTÄ‚MÃ‚NA 4: Planificare

## Diagrame ASCII Detaliate

### Diagrama 4.1: ComparaÈ›ie VizualÄƒ Algoritmi

```
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
              COMPARAÈšIE VIZUALÄ‚ - ALGORITMI DE SCHEDULING
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

Procese: P1(burst=8), P2(burst=4), P3(burst=2), P4(burst=1)
Toate sosesc la t=0, Ã®n ordinea P1, P2, P3, P4

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
FCFS (First-Come, First-Served):
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

Timeline:
0         5         10        15
â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚
â”‚                              â”‚
â–¼                              â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”¬â”€â”€â”
â”‚       P1       â”‚   P2   â”‚ P3 â”‚P4â”‚
â”‚    (burst=8)   â”‚(burst=4â”‚(2) â”‚1 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”´â”€â”€â”˜
0                8       12   14 15

Metrici:
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Proces â”‚ Wait    â”‚ Turnaround â”‚ Response    â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚   P1   â”‚    0    â”‚     8      â”‚      0      â”‚
â”‚   P2   â”‚    8    â”‚    12      â”‚      8      â”‚
â”‚   P3   â”‚   12    â”‚    14      â”‚     12      â”‚
â”‚   P4   â”‚   14    â”‚    15      â”‚     14      â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  AVG   â”‚   8.5   â”‚   12.25    â”‚     8.5     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
SJF (Shortest Job First):
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

Ordine dupÄƒ burst: P4(1) < P3(2) < P2(4) < P1(8)

Timeline:
0         5         10        15
â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚
â–¼                              â–¼
â”Œâ”€â”€â”¬â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚P4â”‚ P3 â”‚   P2   â”‚       P1       â”‚
â”‚1 â”‚ 2  â”‚   4    â”‚       8        â”‚
â””â”€â”€â”´â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
0  1    3        7               15

Metrici:
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Proces â”‚ Wait    â”‚ Turnaround â”‚ Response    â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚   P1   â”‚    7    â”‚    15      â”‚      7      â”‚
â”‚   P2   â”‚    3    â”‚     7      â”‚      3      â”‚
â”‚   P3   â”‚    1    â”‚     3      â”‚      1      â”‚
â”‚   P4   â”‚    0    â”‚     1      â”‚      0      â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  AVG   â”‚  2.75   â”‚    6.5     â”‚    2.75     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

ÃmbunÄƒtÄƒÈ›ire vs FCFS: Wait time redus de la 8.5 la 2.75 (â†“68%!)

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
ROUND ROBIN (Quantum = 2):
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

Timeline detaliatÄƒ:
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ t=0:  Ready queue: [P1, P2, P3, P4]                                     â”‚
â”‚       â†’ P1 ruleazÄƒ (2 din 8)                                            â”‚
â”‚                                                                          â”‚
â”‚ t=2:  Ready queue: [P2, P3, P4, P1]  (P1 preemptat, trimis la coadÄƒ)   â”‚
â”‚       â†’ P2 ruleazÄƒ (2 din 4)                                            â”‚
â”‚                                                                          â”‚
â”‚ t=4:  Ready queue: [P3, P4, P1, P2]                                     â”‚
â”‚       â†’ P3 ruleazÄƒ (2 din 2) â†’ TERMINAT                                 â”‚
â”‚                                                                          â”‚
â”‚ t=6:  Ready queue: [P4, P1, P2]                                         â”‚
â”‚       â†’ P4 ruleazÄƒ (1 din 1) â†’ TERMINAT                                 â”‚
â”‚                                                                          â”‚
â”‚ t=7:  Ready queue: [P1, P2]                                             â”‚
â”‚       â†’ P1 ruleazÄƒ (2 din 6 remaining)                                  â”‚
â”‚                                                                          â”‚
â”‚ t=9:  Ready queue: [P2, P1]                                             â”‚
â”‚       â†’ P2 ruleazÄƒ (2 din 2) â†’ TERMINAT                                 â”‚
â”‚                                                                          â”‚
â”‚ t=11: Ready queue: [P1]                                                 â”‚
â”‚       â†’ P1 ruleazÄƒ (2 din 4 remaining)                                  â”‚
â”‚                                                                          â”‚
â”‚ t=13: Ready queue: [P1]                                                 â”‚
â”‚       â†’ P1 ruleazÄƒ (2 din 2) â†’ TERMINAT                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Gantt Chart:
0    2    4    6  7    9   11   13   15
â”‚â”€â”€â”€â”€â”‚â”€â”€â”€â”€â”‚â”€â”€â”€â”€â”‚â”€â”€â”‚â”€â”€â”€â”€â”‚â”€â”€â”€â”€â”‚â”€â”€â”€â”€â”‚â”€â”€â”€â”€â”‚
â”Œâ”€â”€â”€â”€â”¬â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”¬â”€â”€â”¬â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”
â”‚ P1 â”‚ P2 â”‚ P3 â”‚P4â”‚ P1 â”‚ P2 â”‚ P1 â”‚ P1 â”‚
â”‚(2) â”‚(2) â”‚(2) â”‚1 â”‚(2) â”‚(2) â”‚(2) â”‚(2) â”‚
â””â”€â”€â”€â”€â”´â”€â”€â”€â”€â”´â”€â”€â”€â”€â”´â”€â”€â”´â”€â”€â”€â”€â”´â”€â”€â”€â”€â”´â”€â”€â”€â”€â”´â”€â”€â”€â”€â”˜

Metrici:
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Proces â”‚ Wait    â”‚ Turnaround â”‚ Response    â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚   P1   â”‚    7    â”‚    15      â”‚      0      â”‚ â† Response excelent!
â”‚   P2   â”‚    7    â”‚    11      â”‚      2      â”‚
â”‚   P3   â”‚    4    â”‚     6      â”‚      4      â”‚
â”‚   P4   â”‚    6    â”‚     7      â”‚      6      â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  AVG   â”‚    6    â”‚   9.75     â”‚      3      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
COMPARAÈšIE FINALÄ‚:
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   Algoritm    â”‚ Avg Wait  â”‚ Avg Turnar.  â”‚ Avg Response â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚     FCFS      â”‚    8.5    â”‚    12.25     â”‚     8.5      â”‚
â”‚     SJF       â”‚   2.75    â”‚     6.5      â”‚    2.75      â”‚ â† Best wait
â”‚  RR (q=2)     â”‚    6.0    â”‚    9.75      â”‚     3.0      â”‚ â† Best response
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

ObservaÈ›ii:
â€¢ SJF minimizeazÄƒ waiting time (optimal teoretic)
â€¢ RR oferÄƒ cel mai bun response time (interactivitate)
â€¢ FCFS are convoy effect (P4 cu burst=1 aÈ™teaptÄƒ 14 unitÄƒÈ›i!)
```

### Diagrama 4.2: MLFQ (Multi-Level Feedback Queue)

```
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
                    MULTI-LEVEL FEEDBACK QUEUE
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                         MLFQ STRUCTURE                                  â”‚
â”‚                                                                         â”‚
â”‚  Prioritate                                                             â”‚
â”‚  ÃNALTÄ‚                                                                 â”‚
â”‚    â”‚                                                                    â”‚
â”‚    â”‚   Queue 0: Quantum = 8ms, RR                                      â”‚
â”‚    â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”              â”‚
â”‚    â”‚   â”‚  â—‹â”€â”€â—‹â”€â”€â—‹â”€â”€â—‹     (procese nou create/interactive)â”‚              â”‚
â”‚    â”‚   â”‚  P1 P7 P12     Prioritate maximÄƒ               â”‚              â”‚
â”‚    â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜              â”‚
â”‚    â”‚         â”‚                                                          â”‚
â”‚    â”‚         â”‚ FoloseÈ™te tot quantum-ul? â†’ CoboarÄƒ!                    â”‚
â”‚    â”‚         â–¼                                                          â”‚
â”‚    â”‚   Queue 1: Quantum = 16ms, RR                                     â”‚
â”‚    â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”              â”‚
â”‚    â”‚   â”‚  â—‹â”€â”€â—‹â”€â”€â—‹        (procese "medii")              â”‚              â”‚
â”‚    â”‚   â”‚  P3 P5 P9                                      â”‚              â”‚
â”‚    â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜              â”‚
â”‚    â”‚         â”‚                                                          â”‚
â”‚    â”‚         â”‚ FoloseÈ™te tot quantum-ul? â†’ CoboarÄƒ!                    â”‚
â”‚    â”‚         â–¼                                                          â”‚
â”‚    â”‚   Queue 2: Quantum = 32ms, RR                                     â”‚
â”‚    â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”              â”‚
â”‚    â”‚   â”‚  â—‹â”€â”€â—‹           (procese CPU-bound)            â”‚              â”‚
â”‚    â”‚   â”‚  P2 P6                                         â”‚              â”‚
â”‚    â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜              â”‚
â”‚    â”‚         â”‚                                                          â”‚
â”‚    â”‚         â–¼                                                          â”‚
â”‚    â”‚   Queue 3: FCFS (cea mai joasÄƒ prioritate)                        â”‚
â”‚    â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”              â”‚
â”‚    â”‚   â”‚  â—‹â”€â”€â—‹â”€â”€â—‹â”€â”€â—‹â”€â”€â—‹  (batch jobs)                   â”‚              â”‚
â”‚    â”‚   â”‚  P4 P8 P10 P11 P13                             â”‚              â”‚
â”‚    â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜              â”‚
â”‚    â–¼                                                                    â”‚
â”‚  JOASÄ‚                                                                  â”‚
â”‚                                                                         â”‚
â”‚  â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•               â”‚
â”‚  REGULI MLFQ:                                                          â”‚
â”‚  â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•               â”‚
â”‚                                                                         â”‚
â”‚  Regula 1: DacÄƒ Priority(A) > Priority(B) â†’ A ruleazÄƒ                  â”‚
â”‚  Regula 2: DacÄƒ Priority(A) = Priority(B) â†’ RR Ã®ntre ele               â”‚
â”‚  Regula 3: Proces nou â†’ Queue 0 (prioritate maximÄƒ)                    â”‚
â”‚  Regula 4a: DacÄƒ foloseÈ™te tot quantum-ul â†’ coboarÄƒ o coadÄƒ            â”‚
â”‚  Regula 4b: DacÄƒ renunÈ›Äƒ la CPU (I/O) â†’ rÄƒmÃ¢ne Ã®n aceeaÈ™i coadÄƒ        â”‚
â”‚  Regula 5: PRIORITY BOOST la fiecare S secunde                         â”‚
â”‚            (mutÄƒ TOATE procesele Ã®n Queue 0)                           â”‚
â”‚                                                                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
EXEMPLU TIMELINE MLFQ:
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

Proces A: Interactive (face I/O frecvent, burst scurt)
Proces B: CPU-bound (calcul continuu)

t=0:   Ambele Ã®n Q0 (nou create)
       A ruleazÄƒ 3ms, face I/O â†’ rÄƒmÃ¢ne Ã®n Q0 âœ“
       B ruleazÄƒ 8ms (tot quantum) â†’ coboarÄƒ Ã®n Q1 â†“

t=8:   A (Q0) are prioritate > B (Q1)
       A ruleazÄƒ 2ms, face I/O â†’ rÄƒmÃ¢ne Ã®n Q0 âœ“

t=10:  A face I/O, B (Q1) ruleazÄƒ
       B ruleazÄƒ 16ms (tot quantum Q1) â†’ coboarÄƒ Ã®n Q2 â†“

t=26:  A revine din I/O
       A (Q0) are prioritate > B (Q2)
       A ruleazÄƒ...

Rezultat: A (interactiv) are mereu rÄƒspuns rapid!
          B (batch) ruleazÄƒ cÃ¢nd A nu are nevoie de CPU.

Timeline vizual:
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚    A    â”‚         B          â”‚  A â”‚        B        â”‚  A â”‚     B     â”‚
â”‚ (Q0,3ms)â”‚     (Q0â†’Q1,8ms)    â”‚(Q0)â”‚   (Q1â†’Q2,16ms)  â”‚(Q0)â”‚  (Q2...)  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
0         3                    11  13                 29   31

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
PROBLEMA STARVATION È˜I SOLUÈšIA BOOST:
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

FÄƒrÄƒ boost:
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Q0: [I1, I2, I3, ...] â† Multe procese interactive                     â”‚
â”‚  Q1: [...]                                                              â”‚
â”‚  Q2: [...]                                                              â”‚
â”‚  Q3: [B1, B2] â† Procese batch NU PRIMESC NICIODATÄ‚ CPU! (starvation)   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Cu Priority Boost (la fiecare S = 1 secundÄƒ):
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  t=1s: BOOST! Toate procesele â†’ Q0                                     â”‚
â”‚  Q0: [I1, I2, I3, B1, B2, ...] â† B1, B2 primesc È™i ei È™ansa           â”‚
â”‚  Q1: []                                                                 â”‚
â”‚  Q2: []                                                                 â”‚
â”‚  Q3: []                                                                 â”‚
â”‚                                                                         â”‚
â”‚  B1, B2 ruleazÄƒ cÃ¢te 8ms, apoi coboarÄƒ din nou...                      â”‚
â”‚  Dar la fiecare secundÄƒ primesc din nou o È™ansÄƒ!                       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ExerciÈ›ii Rezolvate

### ExerciÈ›iul 4.1: Calcul Complet Planificare

ProblemÄƒ: CalculeazÄƒ metricile pentru urmÄƒtoarele procese folosind FCFS È™i SJF:

| Proces | Arrival Time | Burst Time |
|--------|--------------|------------|
| P1 | 0 | 7 |
| P2 | 2 | 4 |
| P3 | 4 | 1 |
| P4 | 5 | 4 |

SoluÈ›ie FCFS:

```
Procesele sunt servite Ã®n ordinea sosirii: P1, P2, P3, P4

Gantt Chart:
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚      P1       â”‚   P2   â”‚P3 â”‚   P4   â”‚
â”‚     (7)       â”‚  (4)   â”‚(1)â”‚  (4)   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”˜
0               7       11  12       16

Calcule:
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Proces â”‚ Arrival â”‚ Completion â”‚ Turnaround     â”‚ Waiting    â”‚
â”‚        â”‚         â”‚            â”‚ (CT - AT)      â”‚ (TT - BT)  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚   P1   â”‚    0    â”‚     7      â”‚  7 - 0 = 7     â”‚ 7 - 7 = 0  â”‚
â”‚   P2   â”‚    2    â”‚    11      â”‚ 11 - 2 = 9     â”‚ 9 - 4 = 5  â”‚
â”‚   P3   â”‚    4    â”‚    12      â”‚ 12 - 4 = 8     â”‚ 8 - 1 = 7  â”‚
â”‚   P4   â”‚    5    â”‚    16      â”‚ 16 - 5 = 11    â”‚ 11 - 4 = 7 â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  AVG   â”‚    -    â”‚     -      â”‚     8.75       â”‚    4.75    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

SoluÈ›ie SJF (Non-Preemptive):

```
La t=0: Doar P1 disponibil â†’ P1 ruleazÄƒ
La t=7: P2(4), P3(1), P4(4) disponibile â†’ P3 cel mai scurt
La t=8: P2(4), P4(4) disponibile â†’ P2 (primul sosit)
La t=12: Doar P4 â†’ P4 ruleazÄƒ

Gantt Chart:
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚      P1       â”‚P3 â”‚   P2   â”‚   P4   â”‚
â”‚     (7)       â”‚(1)â”‚  (4)   â”‚  (4)   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”˜
0               7   8       12       16

Calcule:
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Proces â”‚ Arrival â”‚ Completion â”‚ Turnaround     â”‚ Waiting    â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚   P1   â”‚    0    â”‚     7      â”‚  7 - 0 = 7     â”‚ 7 - 7 = 0  â”‚
â”‚   P2   â”‚    2    â”‚    12      â”‚ 12 - 2 = 10    â”‚ 10 - 4 = 6 â”‚
â”‚   P3   â”‚    4    â”‚     8      â”‚  8 - 4 = 4     â”‚ 4 - 1 = 3  â”‚
â”‚   P4   â”‚    5    â”‚    16      â”‚ 16 - 5 = 11    â”‚ 11 - 4 = 7 â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  AVG   â”‚    -    â”‚     -      â”‚      8.0       â”‚    4.0     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

ComparaÈ›ie:
- FCFS: Avg Wait = 4.75, Avg Turnaround = 8.75
- SJF:  Avg Wait = 4.0,  Avg Turnaround = 8.0
- SJF reduce waiting time cu 16%
```

---

### ExerciÈ›iul 4.2: Round Robin cu timpuri de sosire

ProblemÄƒ: Quantum = 3, calculeazÄƒ pentru:

| Proces | Arrival | Burst |
|--------|---------|-------|
| P1 | 0 | 5 |
| P2 | 1 | 3 |
| P3 | 2 | 1 |
| P4 | 3 | 2 |
| P5 | 4 | 3 |

SoluÈ›ie:

```
Timeline pas cu pas:

t=0: Ready=[P1]
     P1 ruleazÄƒ 3ms (remaining: 2)
     
t=3: Ready=[P2, P3, P4, P1] (P2,P3,P4 au sosit Ã®ntre timp; P1 la final)
     P2 ruleazÄƒ 3ms (remaining: 0) â†’ DONE
     
t=6: Ready=[P3, P4, P1, P5] (P5 sosit la t=4)
     P3 ruleazÄƒ 1ms (remaining: 0) â†’ DONE
     
t=7: Ready=[P4, P1, P5]
     P4 ruleazÄƒ 2ms (remaining: 0) â†’ DONE
     
t=9: Ready=[P1, P5]
     P1 ruleazÄƒ 2ms (remaining: 0) â†’ DONE
     
t=11: Ready=[P5]
      P5 ruleazÄƒ 3ms (remaining: 0) â†’ DONE
      
t=14: TOATE COMPLETE

Gantt Chart:
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”¬â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   P1    â”‚   P2    â”‚P3 â”‚ P4 â”‚ P1 â”‚   P5    â”‚
â”‚  (3)    â”‚   (3)   â”‚(1)â”‚ (2)â”‚ (2)â”‚   (3)   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”´â”€â”€â”€â”€â”´â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
0         3         6   7    9   11        14

Metrici:
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Proces â”‚ Arrival â”‚ Completion â”‚ Turnaround     â”‚ Waiting    â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚   P1   â”‚    0    â”‚    11      â”‚ 11 - 0 = 11    â”‚ 11 - 5 = 6 â”‚
â”‚   P2   â”‚    1    â”‚     6      â”‚  6 - 1 = 5     â”‚  5 - 3 = 2 â”‚
â”‚   P3   â”‚    2    â”‚     7      â”‚  7 - 2 = 5     â”‚  5 - 1 = 4 â”‚
â”‚   P4   â”‚    3    â”‚     9      â”‚  9 - 3 = 6     â”‚  6 - 2 = 4 â”‚
â”‚   P5   â”‚    4    â”‚    14      â”‚ 14 - 4 = 10    â”‚ 10 - 3 = 7 â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  AVG   â”‚    -    â”‚     -      â”‚      7.4       â”‚    4.6     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ÃntrebÄƒri Tip Examen

4.1 (GrilÄƒ) Ce algoritm de planificare este optimal pentru minimizarea timpului mediu de aÈ™teptare?
- a) FCFS
- b) SJF âœ“
- c) Round Robin
- d) MLFQ

---

4.2 (GrilÄƒ) Anomalia Belady afirmÄƒ cÄƒ:
- a) SJF poate cauza starvation
- b) Cu FIFO, mai multe pagini pot cauza mai multe page faults âœ“
- c) Round Robin are overhead mare de context switch
- d) Priority planificare este unfair

---

4.3 (5p) Fie procesele P1(burst=6), P2(burst=3), P3(burst=8), P4(burst=3), toate sosind la t=0.

a) CalculeazÄƒ avg waiting time pentru FCFS (ordinea P1,P2,P3,P4)
b) CalculeazÄƒ avg waiting time pentru SJF
c) Ce algoritm e mai bun È™i cu cÃ¢t?
d) DacÄƒ P3 este un proces interactiv, ar fi SJF o alegere bunÄƒ? JustificÄƒ.

RÄƒspuns:

```
a) FCFS:
   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”
   â”‚   P1   â”‚ P2  â”‚    P3    â”‚ P4  â”‚
   â””â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”˜
   0        6     9         17    20
   
   Wait times: P1=0, P2=6, P3=9, P4=17
   Avg = (0+6+9+17)/4 = 8.0

b) SJF (ordine: P2,P4,P1,P3 - burst 3,3,6,8):
   â”Œâ”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
   â”‚ P2  â”‚ P4  â”‚   P1   â”‚    P3    â”‚
   â””â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
   0     3     6       12         20
   
   Wait times: P2=0, P4=3, P1=6, P3=12
   Avg = (0+3+6+12)/4 = 5.25

c) SJF e mai bun: 8.0 - 5.25 = 2.75 unitÄƒÈ›i mai mic
   ÃmbunÄƒtÄƒÈ›ire: 2.75/8.0 = 34%

d) NU! P3 (burst=8, cel mai lung) ar fi Ã®ntotdeauna ultimul.
   Response time P3 cu SJF = 12 (cel mai mare!)
   Pentru procese interactive, Round Robin sau MLFQ ar fi preferabile.
   MLFQ: P3 ar Ã®ncepe Ã®n Q0 cu prioritate mare, ar primi rapid un time slice.
```

---

4.4 (7p) ExplicÄƒ complet algoritmul MLFQ, incluzÃ¢nd:
a) Structura (numÄƒr de cozi, quantum pentru fiecare)
b) Regulile de tranziÈ›ie Ã®ntre cozi
c) Problema starvation È™i cum o rezolvÄƒ
d) De ce MLFQ aproximeazÄƒ SJF fÄƒrÄƒ sÄƒ cunoascÄƒ burst-ul?

RÄƒspuns model:

```
a) StructurÄƒ tipicÄƒ (3 puncte):
   - 3-4 cozi cu prioritÄƒÈ›i diferite
   - Q0: Quantum mic (8ms), prioritate maximÄƒ
   - Q1: Quantum mediu (16ms)
   - Q2: Quantum mare (32ms)
   - Q3: FCFS, prioritate minimÄƒ
   
   Procesare: Ãntotdeauna ruleazÄƒ din coada cu prioritatea cea mai mare
   care are procese ready.

b) Reguli de tranziÈ›ie (2 puncte):
   - Proces NOU â†’ Q0 (beneficiu al Ã®ndoielii)
   - FoloseÈ™te TOT quantum-ul â†’ coboarÄƒ o coadÄƒ (e CPU-bound)
   - RenunÈ›Äƒ la CPU Ã®nainte de quantum (I/O) â†’ rÄƒmÃ¢ne Ã®n aceeaÈ™i coadÄƒ
   - FoloseÈ™te CPU total alocat Ã®ntr-o fereastrÄƒ â†’ coboarÄƒ

c) Starvation È™i soluÈ›ia (1 punct):
   ProblemÄƒ: Procesele din cozile joase nu primesc CPU dacÄƒ existÄƒ mereu
             procese Ã®n cozile Ã®nalte
   SoluÈ›ie: PRIORITY BOOST - la fiecare S secunde, mutÄƒ TOATE procesele
            Ã®n Q0. GaranteazÄƒ cÄƒ fiecare proces primeÈ™te eventual CPU.

d) Aproximarea SJF (1 punct):
   - Procesele cu burst scurt terminÄƒ Ã®n Q0 â†’ comportament tip SJF
   - Procesele cu burst lung coboarÄƒ â†’ rulate cu prioritate mai micÄƒ
   - Rezultat: Procesele scurte terminÄƒ primele, fÄƒrÄƒ a cunoaÈ™te burst-ul
   - MLFQ "Ã®nvaÈ›Äƒ" din comportamentul trecut al procesului
```

---

*Continuare Ã®n fiÈ™ierul urmÄƒtor cu SÄƒptÄƒmÃ¢nile 5-8...*

---

*Materiale dezvoltate by Revolvix pentru ASE BucureÈ™ti - CSIE*

## ExerciÈ›ii avansate (Evaluare & Proiectare)

> ğŸ’¡ **Provocare:** Aceste exerciÈ›ii depÄƒÈ™esc setul tipic de examen. Ele dezvoltÄƒ abilitÄƒÈ›i de analizÄƒ criticÄƒ utile Ã®n interviuri tehnice È™i Ã®n activitatea de cercetare.

### E1.1: AnalizÄƒ de compromisuri (Evaluare) â­â­â­â­
**Dificultate:** Expert | **Timp:** ~15 min | **Nivel cognitiv:** Evaluare

Un furnizor de cloud ruleazÄƒ sarcini mixte: cereri web interactive (burst mediu 5 ms) È™i joburi batch de procesare (burst mediu 500 ms).

**SarcinÄƒ:** EvaluaÈ›i ce configuraÈ›ie de planificare este cea mai potrivitÄƒ:
- a) FCFS pur
- b) SJF pur (cu estimarea burst-ului)
- c) Round Robin cu Q=10 ms
- d) MLFQ cu 4 cozi (Q0=8 ms, Q1=16 ms, Q2=32 ms, Q3=FCFS)

IncludeÈ›i Ã®n analizÄƒ aceste criterii:
1. Timpul de rÄƒspuns pentru cererile interactive
2. Throughput pentru joburile batch
3. Echitate Ã®ntre tipuri de sarcini
4. Complexitatea implementÄƒrii
5. Riscul de starvation

**RÄƒspuns model:**
```
MLFQ (opÈ›iunea d) este optim pentru acest scenariu cu sarcini mixte.

AnalizÄƒ pe criterii:

1. Timp de rÄƒspuns (interactiv):
   - FCFS: Slab (job de 5ms aÈ™teaptÄƒ dupÄƒ unul de 500ms = rÄƒspuns 500ms)
   - SJF: Excelent (job-urile de 5ms sunt mereu primele)
   - RR Q=10ms: Bun (max 10ms aÈ™teptare iniÈ›ialÄƒ per proces Ã®n coadÄƒ)
   - MLFQ: Excelent (interactivele rÄƒmÃ¢n Ã®n Q0, primesc rapid cuantÄƒ de 8ms)

2. Throughput (Batch):
   - FCFS: Bun (fÄƒrÄƒ overhead de comutare de context)
   - SJF: Slab (job-urile batch sunt mereu ultimele, pot suferi starvation)
   - RR: Moderat (comutÄƒrile frecvente afecteazÄƒ job-urile mari)
   - MLFQ: Bun (batch coboarÄƒ Ã®n Q3 FCFS, ruleazÄƒ eficient)

3. Echitate:
   - FCFS: Inechitabil (ordinea sosirii dominÄƒ)
   - SJF: Foarte inechitabil (job-urile lungi suferÄƒ starvation)
   - RR: Echitabil (toÈ›i primesc timp CPU)
   - MLFQ: Echilibrat (job-urile scurte favorizate, cele lungi progreseazÄƒ)

4. Complexitate:
   - FCFS: trivialÄƒ
   - SJF: necesitÄƒ predicÈ›ia burst-ului
   - RR: moderatÄƒ (Ã®ntreruperi de timer)
   - MLFQ: complexÄƒ (cozi multiple, promovÄƒri/retrogradÄƒri)

5. Risc de starvation:
   - FCFS: inexistent
   - SJF: ridicat
   - RR: inexistent
   - MLFQ: scÄƒzut (cu priority boost periodic)

Concluzie: MLFQ echilibreazÄƒ cel mai bine rÄƒspunsul interactiv È™i throughput-ul batch.
```

### E1.2: Proiectare de sistem (Proiectare) â­â­â­â­
**Dificultate:** Expert | **Timp:** ~20 min | **Nivel cognitiv:** Proiectare

**Scenariu:** ProiectaÈ›i planificatorul pentru un sistem embedded Ã®n timp real dintr-un vehicul autonom. Sistemul trebuie sÄƒ gestioneze:

| Tip task | PerioadÄƒ | Deadline | ExecuÈ›ie cel mai rÄƒu caz |
|----------|----------|----------|--------------------------|
| Evitare coliziuni | 10ms | 10ms | 2ms |
| MenÈ›inere bandÄƒ | 50ms | 50ms | 8ms |
| Actualizare navigaÈ›ie | 200ms | 200ms | 15ms |
| Infotainment | 500ms | 1000ms | 50ms |

**SarcinÄƒ:** ProiectaÈ›i o soluÈ›ie de planificare care:
1. GaranteazÄƒ respectarea tuturor deadline-urilor critice pentru siguranÈ›Äƒ
2. MaximizeazÄƒ responsivitatea infotainment-ului
3. GestioneazÄƒ supraÃ®ncÄƒrcarea tranzitorie cu graÈ›ie

FurnizaÈ›i:
- a) Alegerea algoritmului de planificare cu justificare
- b) Atribuirea prioritÄƒÈ›ilor pentru fiecare task
- c) Analiza de schedulabilitate (sistemul este fezabil?)
- d) Strategia de gestionare a supraÃ®ncÄƒrcÄƒrii

**RÄƒspuns model:**
```
a) Algoritm: Rate Monotonic Scheduling (RMS) cu moÈ™tenire de prioritate

   Justificare:
   - RMS este optim pentru planificarea preemptivÄƒ cu prioritÄƒÈ›i fixe
   - MoÈ™tenirea prioritÄƒÈ›ii previne inversarea prioritÄƒÈ›ii
   - Bine Ã®nÈ›eles, verificat formal, folosit Ã®n automotive (AUTOSAR)

b) Atribuirea prioritÄƒÈ›ilor (RMS: perioadÄƒ mai scurtÄƒ = prioritate mai mare):
   
   Prioritate 1 (MaximÄƒ): Evitare coliziuni (perioadÄƒ 10ms)
   Prioritate 2: MenÈ›inere bandÄƒ (perioadÄƒ 50ms)
   Prioritate 3: Actualizare navigaÈ›ie (perioadÄƒ 200ms)
   Prioritate 4 (MinimÄƒ): Infotainment (perioadÄƒ 500ms)

c) AnalizÄƒ de schedulabilitate:
   
   Utilizare CPU = Î£(Ci/Ti)
   = 2/10 + 8/50 + 15/200 + 50/500
   = 0.20 + 0.16 + 0.075 + 0.10
   = 0.535 (53.5%)
   
   Limita de utilizare RMS pentru n=4: U = 4(2^(1/4) - 1) = 0.757 (75.7%)
   
   Deoarece 0.535 < 0.757, sistemul ESTE PLANIFICABIL.
   
   Verificare prin Analiza Timpului de RÄƒspuns:
   - R_coliziune = 2ms < 10ms âœ“
   - R_banda = 2 + 8 = 10ms (o preempÈ›iune coliziune) < 50ms âœ“
   - R_nav = 2 + 8 + 15 + ceil(25/10)*2 = 31ms < 200ms âœ“
   - R_info = cel mai rÄƒu caz cu toate preempÈ›iunile < 1000ms âœ“

d) Strategie de gestionare a supraÃ®ncÄƒrcÄƒrii:
   
   1. CONTROL ADMISIE: Respinge cererile noi de infotainment dacÄƒ
      utilizarea CPU depÄƒÈ™eÈ™te 70%
   
   2. DEGRADARE GRAÈšIOASÄ‚:
      - DacÄƒ evitarea coliziunilor depÄƒÈ™eÈ™te 2ms: sari actualizarea navigaÈ›iei
      - DacÄƒ menÈ›inerea benzii depÄƒÈ™eÈ™te 8ms: reduce infotainment-ul la 1Hz
      - Nu sÄƒri niciodatÄƒ task-urile critice pentru siguranÈ›Äƒ
   
   3. WATCHDOG: Timer hardware reseteazÄƒ sistemul dacÄƒ evitarea
      coliziunilor rateazÄƒ deadline-ul (fail-safe la oprire de urgenÈ›Äƒ)
```

---

*Materiale dezvoltate de Revolvix pentru ASE BucureÈ™ti â€” CSIE*
