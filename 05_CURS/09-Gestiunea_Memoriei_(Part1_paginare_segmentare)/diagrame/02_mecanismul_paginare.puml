@startuml mecanismul_paginare
!include ../../diagrame_common/skin.puml
title Traducerea Adresei cu Paginare

skinparam rectangle {
    roundCorner 5
}

rectangle "**ADRESĂ VIRTUALĂ** (32 biți, pagini 4KB)" as va #E3F2FD {
    rectangle "Page Number\n(20 biți)" as pn #BBDEFB
    rectangle "Offset\n(12 biți)" as off #C8E6C9
    
    note bottom
    Exemplu: **0x00003ABC**
    Page# = 3, Offset = 0xABC
    end note
}

rectangle "**PAGE TABLE**" as pt #FFF9C4 {
    note as pt_entries
    | Index | Frame | V | R/W |
    | 0 | 0x0A5 | 1 | RW |
    | 1 | 0x123 | 1 | RW |
    | 2 | 0x000 | **0** | - |
    | **3** | **0x0F7** | 1 | RW |
    | ... | ... | ... | ... |
    
    **V** = Valid (în memorie)
    **R/W** = Read/Write
    end note
}

rectangle "**ADRESĂ FIZICĂ**" as pa #C8E6C9 {
    rectangle "Frame Number\n0x0F7" as fn #BBDEFB
    rectangle "Offset\n0xABC" as off2 #C8E6C9
    
    note bottom
    **= 0x0F7ABC**
    Frame × 4KB + Offset
    end note
}

rectangle "**MEMORIA FIZICĂ**" as pm #FFE0B2 {
    rectangle "Frame 100" as f100 #FFFFFF
    rectangle "Frame 247\n(0x0F7)" as f247 #C8E6C9
    rectangle "Frame 500" as f500 #FFFFFF
    
    note right of f247
    Aici sunt datele!
    Byte-ul la offset 0xABC
    end note
}

va -[#3498DB,bold]-> pt : 1. Page# = index
pt -[#27AE60,bold]-> pa : 2. Frame# din tabel
pa -[#E74C3C,bold]-> pm : 3. Acces fizic

note bottom
**Pașii traducerii:**
1. Extrage Page Number din adresa virtuală
2. Indexează Page Table → obține Frame Number
3. Concatenează Frame + Offset → Adresa Fizică
4. Accesează memoria fizică
end note

@enduml
