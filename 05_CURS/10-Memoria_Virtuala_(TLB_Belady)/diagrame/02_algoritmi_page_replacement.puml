@startuml algoritmi_page_replacement
!include ../../diagrame_common/skin.puml
title Algoritmi de Înlocuire Pagini

skinparam rectangle {
    roundCorner 8
}

rectangle "**FIFO** (First-In, First-Out)" as fifo #FFCDD2 {
    note as fifo_note
    **Mecanism:** Evacuează pagina cea mai veche
    **Structură:** Coadă simplă
    
    ✓ Simplu de implementat
    ✗ Poate evacua pagini utile
    ✗ **Anomalia Belady** (mai multe frames → mai multe faults!)
    
    **Page Faults:** 15 (pentru ref. string standard)
    end note
}

rectangle "**OPT** (Optimal - Clarvăzător)" as opt #C8E6C9 {
    note as opt_note
    **Mecanism:** Evacuează pagina folosită cel mai târziu în viitor
    **Structură:** Necesită cunoașterea viitorului!
    
    ✓ **Minimum teoretic** de page faults
    ✗ **Imposibil practic** (nu știm viitorul)
    ✓ Util ca benchmark
    
    **Page Faults:** 9 (optimal)
    end note
}

rectangle "**LRU** (Least Recently Used)" as lru #E3F2FD {
    note as lru_note
    **Mecanism:** Evacuează pagina nefolosită cel mai mult timp
    **Structură:** Counter sau Stack
    
    ✓ Aproximează bine OPT
    ✓ Fără anomalia Belady
    ✗ Overhead de tracking (counter/stack)
    
    **Page Faults:** 12 (aproape de OPT)
    end note
}

rectangle "**CLOCK** (Second Chance)" as clock #FFF9C4 {
    note as clock_note
    **Mecanism:** FIFO + Reference Bit
    • R=0 → Evacuează
    • R=1 → R=0, "a doua șansă", continuă
    
    **Structură:** Buffer circular cu pointer
    
    ✓ Aproximează LRU eficient
    ✓ Overhead mic (doar 1 bit per pagină)
    ✓ Folosit în practică!
    
    **Page Faults:** ~12-13
    end note
}

fifo -[hidden]right-> opt
lru -[hidden]right-> clock

note bottom
**Comparație pentru reference string standard cu 3 frames:**
| Algoritm | Page Faults | Practică? |
| FIFO | 15 | Da, simplu |
| **OPT** | **9** | Nu (teoretic) |
| LRU | 12 | Da, dar costisitor |
| **Clock** | ~12 | **Da, recomandat!** |
end note

@enduml
