@startuml docker_namespaces
!include ../../diagrame_common/skin.puml
title Docker și Linux Namespaces

skinparam rectangle {
    roundCorner 8
}

rectangle "**ARHITECTURA DOCKER**" as docker #E3F2FD {
    
    rectangle "Docker Client\n(docker CLI)" as client #FFFFFF
    
    rectangle "Docker Daemon\n(dockerd)" as daemon #FFF9C4
    
    rectangle "Container Runtime\n(containerd → runc)" as runtime #FFE0B2
    
    rectangle "Linux Kernel" as kernel #C8E6C9 {
        rectangle "Namespaces" as ns #FFFFFF
        rectangle "cgroups" as cg #FFFFFF
        rectangle "Union FS" as ufs #FFFFFF
    }
    
    client -[#3498DB]-> daemon : REST API
    daemon -[#27AE60]-> runtime
    runtime -[#E74C3C]-> kernel
}

rectangle "**LINUX NAMESPACES** (Izolare)" as namespaces #FFF9C4 {
    
    rectangle "**pid**\nProcess IDs\nseparate" as pid #E3F2FD
    
    rectangle "**net**\nNetwork stack\npropriu" as net #C8E6C9
    
    rectangle "**mnt**\nFilesystem\nmounts" as mnt #FCE4EC
    
    rectangle "**user**\nUser/Group\nIDs" as user #E1BEE7
    
    rectangle "**uts**\nHostname\nseparat" as uts #FFCDD2
    
    rectangle "**ipc**\nInter-Process\nComm." as ipc #FFF9C4
}

rectangle "**CGROUPS** (Limitare resurse)" as cgroups #C8E6C9 {
    note as cg_note
    • **cpu**: Limitează CPU time
    • **memory**: Limitează RAM
    • **blkio**: Limitează I/O disc
    • **devices**: Control dispozitive
    end note
}

note bottom
**Container = Proces izolat prin:**
1. **Namespaces**: Izolare (ce vede procesul)
2. **cgroups**: Limitare (cât poate folosi)
3. **Union FS**: Imagini layered (eficiență)

**Verificare:** ls /proc/$$/ns/
end note

@enduml