@startuml mlfq_structure
!include ../../diagrame_common/skin.puml
title Multi-Level Feedback Queue (MLFQ)

skinparam rectangle {
    roundCorner 8
}

rectangle "**MLFQ - Structură**" as mlfq #FAFAFA {
    
    rectangle "**Queue 0** - Prioritate MAXIMĂ\nQuantum: 8ms, Round Robin" as q0 #FFCDD2 {
        rectangle "P1" as q0p1 #FFFFFF
        rectangle "P7" as q0p2 #FFFFFF
        rectangle "P12" as q0p3 #FFFFFF
        note right of q0
        Procese noi
        sau interactive
        end note
    }
    
    rectangle "**Queue 1** - Prioritate Medie\nQuantum: 16ms, Round Robin" as q1 #FFE0B2 {
        rectangle "P3" as q1p1 #FFFFFF
        rectangle "P5" as q1p2 #FFFFFF
        note right of q1
        Procese care au
        folosit tot Q0
        end note
    }
    
    rectangle "**Queue 2** - Prioritate Scăzută\nQuantum: 32ms, Round Robin" as q2 #FFF9C4 {
        rectangle "P2" as q2p1 #FFFFFF
        rectangle "P6" as q2p2 #FFFFFF
        note right of q2
        CPU-bound
        processes
        end note
    }
    
    rectangle "**Queue 3** - Prioritate MINIMĂ\nFCFS (batch)" as q3 #C8E6C9 {
        rectangle "P4" as q3p1 #FFFFFF
        rectangle "P8" as q3p2 #FFFFFF
        rectangle "P10" as q3p3 #FFFFFF
        note right of q3
        Batch jobs
        Background
        end note
    }
}

rectangle "**REGULI MLFQ**" as rules #E3F2FD {
    note as rules_note
    **R1**: Priority(A) > Priority(B) → A rulează
    **R2**: Priority(A) = Priority(B) → Round Robin
    **R3**: Proces nou → Queue 0
    **R4a**: Folosește tot quantum → Coboară
    **R4b**: Cedează CPU (I/O) → Rămâne
    **R5**: **Priority Boost** periodic
    end note
}

q0 -[#E74C3C,bold]-> q1 : Folosește\ntot quantum
q1 -[#E74C3C,bold]-> q2 : Folosește\ntot quantum
q2 -[#E74C3C,bold]-> q3 : Folosește\ntot quantum

q3 -[#27AE60,dashed]-> q0 : **BOOST**\n(periodic)
q2 -[#27AE60,dashed]-> q0 : **BOOST**
q1 -[#27AE60,dashed]-> q0 : **BOOST**

note bottom of mlfq
**Avantaj**: Separă automat procesele I/O-bound (prioritate mare)
de cele CPU-bound (prioritate mică) **fără a cunoaște burst-ul**
end note

@enduml
